<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>PandaQ Blog</title>
    <description></description>
    <link>http://pandaq.xyz/</link>
    <atom:link href="http://pandaq.xyz/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Tue, 21 Apr 2020 06:38:15 +0000</pubDate>
    <lastBuildDate>Tue, 21 Apr 2020 06:38:15 +0000</lastBuildDate>
    <generator>Jekyll v4.0.0</generator>
    
      <item>
        <title>è®°ä¸€æ¬¡Spring RedisTemplateåºåˆ—åŒ–ä¹±ç é—®é¢˜çš„æ’æŸ¥è¿‡ç¨‹</title>
        <description>&lt;p&gt;æœ€è¿‘åœ¨SpringBooté¡¹ç›®ä¸­ä½¿ç”¨Redis + Luaè„šæœ¬æ¥åšä¸€ä¸ªåŠŸèƒ½éœ€æ±‚ï¼Œä½¿ç”¨çš„æ˜¯&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/2.1.13.RELEASE/reference/html/boot-features-nosql.html#boot-features-redis&quot;&gt;Spring Data Redis&lt;/a&gt;ä¸­çš„RedisTemplateæ¥è¿›è¡ŒRedisçš„æ“ä½œã€‚Luaè„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-lua highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KEYS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'INCR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'DEL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;è„šæœ¬è¯´æ˜ï¼š&lt;br /&gt;
å¯¹æŸä¸ªKeyè¿›è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;+1&lt;/code&gt;æ“ä½œï¼Œè‹¥&lt;code class=&quot;highlighter-rouge&quot;&gt;+1&lt;/code&gt;ä¹‹åå¤§äº&lt;code class=&quot;highlighter-rouge&quot;&gt;ARGV[1]&lt;/code&gt;å‚æ•°æŒ‡å®šçš„å€¼ï¼Œåˆ™åˆ é™¤è¯¥Keyå¹¶è¿”å›&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;ï¼›å¦åˆ™è¿”å›&lt;code class=&quot;highlighter-rouge&quot;&gt;1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰§è¡Œè„šæœ¬çš„Javaä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.springframework.core.io.ClassPathResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.springframework.data.redis.core.RedisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.springframework.data.redis.core.script.DefaultRedisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.springframework.scripting.support.ResourceScriptSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.springframework.stereotype.Service&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;java.util.Collections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IncrHandler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RedisTemplate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DefaultRedisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IncrHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RedisTemplate&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;redisTemplate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Luaè„šæœ¬è·¯å¾„è®¾ç½®&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;redisScript&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DefaultRedisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;redisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setResultType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;redisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setScriptSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ResourceScriptSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassPathResource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lua/incr.lua&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;incrOK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;incr_key&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;OK&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;redisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;singletonList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;OK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨è°ƒç”¨æ‰§è¡Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;incrHandler.incrOK()&lt;/code&gt;çš„æ—¶å€™æŠ›å‡ºäº†å¼‚å¸¸ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;RR Error running script (call to f_263e9cf28f8033489b846caf5394c82459740761): &lt;br /&gt;
@user_script:3: user_script:3: attempt to compare string with number ; &lt;br /&gt;
nested exception is redis.clients.jedis.exceptions.JedisDataException: &lt;br /&gt;
ERR Error running script (call to f_263e9cf28f8033489b846caf5394c82459740761): &lt;br /&gt;
@user_script:3: user_script:3: attempt to compare string with number&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ„æ€æ˜¯è„šæœ¬åœ¨æ‰§è¡Œç¬¬3è¡Œä»£ç çš„æ—¶å€™ï¼Œå‘ç°ä¸¤ä¸ªæ¯”è¾ƒçš„å‚æ•°ä¸æ˜¯åŒä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œä¸€ä¸ªæ˜¯stringè€Œå¦ä¸€ä¸ªæ˜¯numberã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;redis.call('INCR', key)&lt;/code&gt;è¿™ä¸ªä»£ç è¿”å›çš„æ˜¯INCRæ“ä½œçš„ç»“æœï¼Œè‚¯å®šæ˜¯numberï¼›é‚£ä¹ˆæ„æ€å°±æ˜¯limitå‚æ•°æ˜¯stringç±»å‹ï¼Ÿæˆ‘æ˜æ˜è°ƒç”¨çš„æ—¶å€™ä¼ å…¥çš„limitæ˜¯æ•´æ•°ç±»å‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;redisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;redisScript&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;singletonList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;äºæ˜¯æƒ³åˆ°åœ¨Luaè„šæœ¬ä¸­å¢åŠ æ—¥å¿—è¾“å‡ºï¼Œè§‚å¯Ÿä¸€ä¸‹æˆ‘ä¼ å…¥çš„limitå‚æ•°åœ¨è¿›å…¥Luaè„šæœ¬ä¹‹åæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼š&lt;/p&gt;

&lt;div class=&quot;language-lua highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;KEYS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LOG_NOTICE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LOG_NOTICE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'INCR'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;redis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'DEL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;Luaè„šæœ¬ä¸­å¯ä»¥ä½¿ç”¨redis.log()æ¥æ‰“å°æ—¥å¿—ï¼Œè¿™ä¸ªæ—¥å¿—ä¼šè¾“å‡ºåœ¨RedisæœåŠ¡å™¨çš„æ—¥å¿—ä¸­ã€‚æ‰€ä»¥è°ƒç”¨redis.log()æ—¶æ³¨æ„RedisæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶redis.confä¸­è®¾ç½®çš„æ—¥å¿—çº§åˆ«è¦åŒ¹é…ï¼Œä¸ç„¶æœ‰å¯èƒ½çœ‹ä¸åˆ°æ—¥å¿—è¾“å‡ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;RedisæœåŠ¡å™¨è¾“å‡ºçš„æ—¥å¿—å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;1:M 14 Mar 2020 08:50:59.797 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; Ready to accept connections
1:M 14 Mar 2020 08:51:21.071 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; string
1:M 14 Mar 2020 08:51:21.071 &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; ï¿½ï¿½
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°æˆ‘çš„å‚æ•°ä¼ åˆ°Luaè„šæœ¬ä¹‹åï¼Œç±»å‹å˜æˆäº†stringï¼Œè€Œä¸”å‚æ•°çš„å€¼å˜æˆäº†ä¹±ç ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹ä»£ç è¿›è¡Œå•æ­¥è°ƒè¯•ï¼Œå‘ç°åœ¨å°†Keyå’Œargsè¿›è¡Œåºåˆ—åŒ–çš„æ—¶å€™éƒ½å˜æˆäº†ä¹±ç ï¼Œæ‰€ä»¥Luaè„šæœ¬åœ¨è·å–ARGV[1]å‚æ•°çš„æ—¶å€™ï¼Œå‘ç°æ— æ³•è½¬æ¢æˆnumberã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020-03/redistemplate-jdk-serialize.png&quot; alt=&quot;redistemplate-jdk-serialize.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ˜¯å› ä¸ºRedisTemplateé»˜è®¤ä½¿ç”¨çš„æ˜¯JDKåºåˆ—åŒ–ï¼Œååºåˆ—åŒ–ä¹Ÿåªèƒ½ä½¿ç”¨JDKååºåˆ—åŒ–ã€‚æ‰€ä»¥RedisæœåŠ¡å™¨å¹¶ä¸èƒ½æ­£ç¡®åœ°ååºåˆ—åŒ–Keyå’Œargså‚æ•°ï¼Œå¯¼è‡´ååºåˆ—åŒ–çš„ç»“æœä¸ºä¹±ç ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æœ‰ç‚¹å‘å•Šï¼Œä¸ºä»€ä¹ˆé»˜è®¤ä½¿ç”¨JDKåºåˆ—åŒ–ï¼Œæ˜çŸ¥JDKåºåˆ—åŒ–ä¹‹åRedisæœåŠ¡å™¨æ˜¯ä¸èƒ½æ­£ç¡®ååºåˆ—åŒ–çš„ğŸ˜“ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸ºRedisTemplateè®¾ç½®å…¶ä»–é€šç”¨çš„åºåˆ—åŒ–æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;æˆ–è€…ç›´æ¥ä½¿ç”¨StringRedisTemplateæ¥æ›¿ä»£RedisTemplateï¼Œå®Œç¾é¿å¼€JDKåºåˆ—åŒ–ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StringRedisTemplate&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RedisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;StringRedisTemplate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// StringRedisTemplateä½¿ç”¨StringRedisSerializeræ¥ä½œä¸ºé»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;RedisSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringSerializer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StringRedisSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;setKeySerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;setValueSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;setHashKeySerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;setHashValueSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringSerializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sat, 14 Mar 2020 08:00:00 +0000</pubDate>
        <link>http://pandaq.xyz/2020/03/14/SpringBoot-RedisTemplate-serialize/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2020/03/14/SpringBoot-RedisTemplate-serialize/</guid>
        
        <category>SpringBoot</category>
        
        
      </item>
    
      <item>
        <title>Javaè·å–HTTPè¯·æ±‚ä¸­å®¢æˆ·ç«¯çœŸå®IPçš„å·¥å…·ç±»</title>
        <description>&lt;p&gt;æœ‰æ—¶å€™éœ€è¦åœ¨æœåŠ¡å™¨ç«¯è·å–HTTPè¯·æ±‚å®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»ä¸‹è½½å·¥å…·ç±»çš„Javaæºä»£ç æ–‡ä»¶ï¼š&lt;a href=&quot;/assets/files/java/IPUtils.java&quot;&gt;IPUtils.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æˆ–è€…å®Œæ•´çš„å·¥å…·ç±»ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;com.pandaq.ip.util&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;java.net.InetAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;java.net.NetworkInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;java.net.SocketException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;java.util.Enumeration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/**
 * IPåœ°å€å·¥å…·ç±»
 * @author Luz.Ho211
 * @date 2020-03-13 10:55
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IPUtils&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/**
     * è¯·æ±‚é€šè¿‡åå‘ä»£ç†ä¹‹åï¼Œå¯èƒ½åŒ…å«è¯·æ±‚å®¢æˆ·ç«¯çœŸå®IPçš„HTTP HEADER
     * å¦‚æœåç»­æ‰©å±•ï¼Œæœ‰å…¶ä»–å¯èƒ½åŒ…å«IPçš„HTTP HEADERï¼ŒåŠ åˆ°è¿™é‡Œå³å¯
     */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;POSSIBLE_HEADERS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;X-Forwarded-For&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;X-Real-IP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Proxy-Client-IP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;WL-Proxy-Client-IP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;HTTP_CLIENT_IP&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;HTTP_X_FORWARDED_FOR&quot;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;};&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IPUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/**
     * è·å–è¯·æ±‚å®¢æˆ·ç«¯çš„çœŸå®IPåœ°å€
     * @param request javax.servlet.http.HttpServletRequest
     * @return å®¢æˆ·ç«¯ç«¯çœŸå®IPåœ°å€
     */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getRequestClientRealIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HttpServletRequest&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// å…ˆæ£€æŸ¥ä»£ç†ï¼šé€ä¸ªHTTP HEADERæ£€æŸ¥è¿‡å»ï¼Œçœ‹çœ‹æ˜¯å¦å­˜åœ¨å®¢æˆ·ç«¯çœŸå®IP&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;header&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;POSSIBLE_HEADERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getHeader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isNotBlank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;unknown&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equalsIgnoreCase&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// è¯·æ±‚ç»è¿‡å¤šæ¬¡åå‘ä»£ç†åå¯èƒ½ä¼šæœ‰å¤šä¸ªIPå€¼ï¼ˆä»¥è‹±æ–‡é€—å·åˆ†éš”ï¼‰ï¼Œç¬¬ä¸€ä¸ªIPæ‰æ˜¯å®¢æˆ·ç«¯çœŸå®IP&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;,&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ä»æ‰€æœ‰å¯èƒ½çš„HTTP HEADERä¸­éƒ½æ²¡æœ‰æ‰¾åˆ°å®¢æˆ·ç«¯çœŸå®IPï¼Œé‡‡ç”¨request.getRemoteAddr()æ¥å…œåº•&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getRemoteAddr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;0:0:0:0:0:0:0:1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// è¯´æ˜æ˜¯ä»æœ¬æœºå‘å‡ºçš„è¯·æ±‚ï¼Œç›´æ¥è·å–å¹¶è¿”å›æœ¬æœºIPåœ°å€&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getLocalRealIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/**
     * è·å–æœ¬æœºIPåœ°å€
     * @return è‹¥é…ç½®äº†å¤–ç½‘IPåˆ™ä¼˜å…ˆè¿”å›å¤–ç½‘IPï¼›å¦åˆ™è¿”å›æœ¬åœ°IPåœ°å€ã€‚å¦‚æœæœ¬æœºæ²¡æœ‰è¢«åˆ†é…å±€åŸŸç½‘IPåœ°å€ï¼ˆä¾‹å¦‚æœ¬æœºæ²¡æœ‰è¿æ¥ä»»ä½•ç½‘ç»œï¼‰ï¼Œåˆ™é»˜è®¤è¿”å›127.0.0.1
     */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getLocalRealIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;localIP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æœ¬åœ°IP&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netIP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å¤–ç½‘IP&lt;/span&gt;

        &lt;span class=&quot;nc&quot;&gt;Enumeration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;NetworkInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netInterfaces&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;netInterfaces&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NetworkInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getNetworkInterfaces&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;SocketException&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å‘ç”Ÿå¼‚å¸¸åˆ™è¿”å›null&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;InetAddress&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netIPFound&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ˜¯å¦æ‰¾åˆ°å¤–ç½‘IP&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;netInterfaces&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasMoreElements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;netIPFound&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;Enumeration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;InetAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netInterfaces&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextElement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInetAddresses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hasMoreElements&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextElement&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isSiteLocalAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isLoopbackAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getHostAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;:&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;c1&quot;&gt;// å¤–ç½‘IP&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;netIP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getHostAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;netIPFound&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isSiteLocalAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isLoopbackAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getHostAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;:&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;c1&quot;&gt;// å†…ç½‘IP&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;localIP&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getHostAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isNotBlank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;netIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å¦‚æœé…ç½®äº†å¤–ç½‘IPåˆ™ä¼˜å…ˆè¿”å›å¤–ç½‘IPåœ°å€&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;netIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;localIP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/**
     * &amp;lt;pre&amp;gt;
     * isBlank(null)      = true
     * isBlank(&quot;&quot;)        = true
     * isBlank(&quot; &quot;)       = true
     * isBlank(&quot;bob&quot;)     = false
     * isBlank(&quot;  bob  &quot;) = false
     * &amp;lt;/pre&amp;gt;
     * @param cs è¾“å…¥å‚æ•°
     * @return
     */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isBlank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CharSequence&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strLen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strLen&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strLen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Character&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isWhitespace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/**
     * &amp;lt;pre&amp;gt;
     * isNotBlank(null)      = false
     * isNotBlank(&quot;&quot;)        = false
     * isNotBlank(&quot; &quot;)       = false
     * isNotBlank(&quot;bob&quot;)     = true
     * isNotBlank(&quot;  bob  &quot;) = true
     * &amp;lt;/pre&amp;gt;
     * @param cs è¾“å…¥å‚æ•°
     * @return
     */&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isNotBlank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CharSequence&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isBlank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 13 Mar 2020 06:48:15 +0000</pubDate>
        <link>http://pandaq.xyz/2020/03/13/IPUtils/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2020/03/13/IPUtils/</guid>
        
        <category>Java</category>
        
        
      </item>
    
      <item>
        <title>LinuxæŠ€å·§ï¼šè®©è¿›ç¨‹åœ¨åå°è¿è¡Œæ›´å¯é çš„å‡ ç§æ–¹æ³•</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;å£°æ˜ï¼šæœ¬ç¯‡æ–‡ç« ä¸æ˜¯åŸåˆ›ï¼Œè½¬è½½è‡ªï¼š&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/l-cn-nohup&quot;&gt;https://www.ibm.com/developerworks/cn/linux/l-cn-nohup&lt;/a&gt; &lt;br /&gt;
åŸæ–‡ç« å·²ç»å†™å¾—å¾ˆå¥½äº†ï¼Œè¿™é‡Œè½¬è½½è¿‡æ¥ï¼Œç„¶åè‡ªå·±å®è·µå¹¶è®°å½•ä¸€ä¸‹ã€‚æ„Ÿè°¢åŸæ–‡ç« çš„ä½œè€…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘ä»¬ç»å¸¸ä¼šç¢°åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œç”¨telnet/sshç™»å½•åˆ°è¿œç¨‹çš„LinuxæœåŠ¡å™¨ä¸Šï¼Œæ‰§è¡Œä¸€äº›è€—æ—¶çš„ä»»åŠ¡ã€‚ä½†æ˜¯åœ¨ä»»åŠ¡è¿è¡Œç»“æŸä¹‹å‰ï¼Œæœ¬åœ°æœºå™¨å’Œè¿œç¨‹Linuxæœºå™¨çš„ç½‘ç»œä¸­æ–­äº†ï¼Œæˆ–è€…è‡ªå·±ä¸å°å¿ƒå…³é—­äº†ç»ˆç«¯ï¼Œéƒ½ä¼šå¯¼è‡´Linuxä¸Šè¿è¡Œçš„ä»»åŠ¡è¢«å…³é—­ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä½•è®©å‘½ä»¤æäº¤åä¸å—æœ¬åœ°å…³é—­ç»ˆç«¯çª—å£/ç½‘ç»œæ–­å¼€è¿æ¥çš„å¹²æ‰°å‘¢ï¼Ÿä¸‹é¢ä¸¾äº†ä¸€äº›ä¾‹å­ï¼Œ æ‚¨å¯ä»¥é’ˆå¯¹ä¸åŒçš„åœºæ™¯é€‰æ‹©ä¸åŒçš„æ–¹å¼æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸€-nohupsetsid-å‘½ä»¤&quot;&gt;ä¸€ã€ nohup/setsid/&amp;amp; å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;åœºæ™¯æè¿°ï¼š&lt;/strong&gt;&lt;br /&gt;
å¦‚æœåªæ˜¯ä¸´æ—¶æœ‰ä¸€ä¸ªå‘½ä»¤éœ€è¦é•¿æ—¶é—´è¿è¡Œï¼Œä»€ä¹ˆæ–¹æ³•èƒ½æœ€ç®€ä¾¿çš„ä¿è¯å®ƒåœ¨åå°ç¨³å®šè¿è¡Œå‘¢ï¼Ÿ&lt;br /&gt;
&lt;strong&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;br /&gt;
å½“ç”¨æˆ·æ³¨é”€(logout)æˆ–è€…ç½‘ç»œæ–­å¼€æ—¶ï¼Œç»ˆç«¯ä¼šæ”¶åˆ°HUP(hangup)ä¿¡å·ä»è€Œå…³é—­å…¶æ‰€æœ‰å­è¿›ç¨‹ã€‚å› æ­¤ï¼Œæ€è·¯æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;è®©è¿›ç¨‹å¿½ç•¥HUPä¿¡å·ï¼›&lt;/li&gt;
  &lt;li&gt;è®©è¿›ç¨‹è¿è¡Œåœ¨æ–°çš„ä¼šè¯é‡Œä»è€Œæˆä¸ºä¸å±äºæ­¤ç»ˆç«¯çš„å­è¿›ç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;hangupåç§°çš„æ¥ç”±ï¼š&lt;/strong&gt; &lt;br /&gt;
åœ¨Unixçš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæ¯ä¸ªç»ˆç«¯éƒ½ä¼šé€šè¿‡modemå’Œç³»ç»Ÿé€šè®¯ã€‚å½“ç”¨æˆ·logoutæ—¶ï¼Œmodemå°±ä¼šæŒ‚æ–­(hang up)ç”µè¯ã€‚ åŒç†ï¼Œå½“modemæ–­å¼€è¿æ¥æ—¶ï¼Œå°±ä¼šç»™ç»ˆç«¯å‘é€hangupä¿¡å·æ¥é€šçŸ¥å…¶å…³é—­æ‰€æœ‰å­è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;1-nohup&quot;&gt;1. nohup&lt;/h4&gt;

&lt;p&gt;nohupæ— ç–‘æ˜¯æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„åŠæ³•ã€‚nohupçš„ç”¨é€”å°±æ˜¯è®©æäº¤çš„å‘½ä»¤å¿½ç•¥hangupä¿¡å·ã€‚å…ˆæ¥çœ‹ä¸€ä¸‹nohupçš„å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;man &lt;span class=&quot;nb&quot;&gt;nohup
&lt;/span&gt;NOHUP&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                         User Commands                        NOHUP&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

NAME
       &lt;span class=&quot;nb&quot;&gt;nohup&lt;/span&gt; - run a &lt;span class=&quot;nb&quot;&gt;command &lt;/span&gt;immune to hangups, with output to a non-tty

SYNOPSIS
       &lt;span class=&quot;nb&quot;&gt;nohup &lt;/span&gt;COMMAND &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ARG]...
       &lt;span class=&quot;nb&quot;&gt;nohup &lt;/span&gt;OPTION

DESCRIPTION
       Run COMMAND, ignoring hangup signals.

       &lt;span class=&quot;nt&quot;&gt;--help&lt;/span&gt; display this &lt;span class=&quot;nb&quot;&gt;help &lt;/span&gt;and &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;

       &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
              output version information and &lt;span class=&quot;nb&quot;&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nohupçš„ä½¿ç”¨å¾ˆç®€å•ï¼Œåªè¦åœ¨æ‰§è¡Œçš„å‘½ä»¤å‰åŠ ä¸Šnohupå³å¯ã€‚æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é»˜è®¤ä¼šè¢«é‡å®šå‘åˆ°nohup.outæ–‡ä»¶ä¸­ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯åœ¨ç»“å°¾åŠ ä¸Š&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt;æ¥å°†å‘½ä»¤åŒæ—¶æ”¾å…¥åå°è¿è¡Œï¼Œä¹Ÿå¯ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt;filename 2&amp;gt;&amp;amp;1&lt;/code&gt;æ¥æ›´æ”¹é»˜è®¤çš„é‡å®šå‘æ–‡ä»¶åã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;nohup + &amp;amp; çš„ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ping www.ibm.com&lt;/code&gt;æ˜¯æˆ‘ä»¬è¦è¿è¡Œçš„ä»»åŠ¡æŒ‡ä»¤ã€‚&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nohup &lt;/span&gt;ping www.ibm.com &amp;amp;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1] 39907

&lt;span class=&quot;nb&quot;&gt;nohup&lt;/span&gt;: å¿½ç•¥è¾“å…¥å¹¶æŠŠè¾“å‡ºè¿½åŠ åˆ°&lt;span class=&quot;s2&quot;&gt;&quot;nohup.out&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœè¦ä¿®æ”¹æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é‡å®šå‘çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;gt;filename 2&amp;gt;&amp;amp;1&lt;/code&gt;ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nohup &lt;/span&gt;ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; output.log 2&amp;gt;&amp;amp;1 &amp;amp;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¸Šé¢æˆ‘ä»¬æŠŠæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘çš„æ–‡ä»¶æ”¹æˆäº†output.logï¼Œå¹¶åœ¨æœ€åä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt;æ¥å°†ä»»åŠ¡æ”¾åˆ°åå°æ‰§è¡Œã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨Shellä¸­ï¼Œstdinæ˜¯æ ‡å‡†è¾“å…¥ï¼›stdoutæ˜¯æ ‡å‡†è¾“å‡ºï¼›stderræ˜¯æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œåˆ†åˆ«ç”¨æ•°å­—0ï¼Œ1ï¼Œ2è¡¨ç¤ºã€‚&lt;br /&gt;
ä¸Šé¢çš„2&amp;gt;&amp;amp;1å°±è¡¨ç¤ºå°†stderrè¾“å‡ºä¹Ÿé‡å®šå‘åˆ°stdoutæ‰€é‡å®šå‘åˆ°çš„åŒåæ–‡ä»¶ä¸­ï¼Œå³&amp;amp;1è¡¨ç¤ºoutput.logæ–‡ä»¶ã€‚ &lt;br /&gt;
æ‰€ä»¥å½“æ‰§è¡Œçš„å‘½ä»¤å‘ç”Ÿæ ‡å‡†é”™è¯¯ï¼Œé‚£ä¹ˆè¿™ä¸ªé”™è¯¯ä¹Ÿä¼šè¾“å‡ºåˆ°ä½ æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œå³output.logæ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;2-setsid&quot;&gt;2. setsid&lt;/h4&gt;

&lt;p&gt;nohupèƒ½é€šè¿‡å¿½ç•¥HUPä¿¡å·æ¥ä½¿æˆ‘ä»¬çš„è¿›ç¨‹é¿å…ä¸­é€”è¢«ä¸­æ–­ã€‚ä½†å¦‚æœæˆ‘ä»¬æ¢ä¸ªè§’åº¦æ€è€ƒï¼Œå¦‚æœæˆ‘ä»¬çš„è¿›ç¨‹ä¸å±äºæ¥å—HUPä¿¡å·çš„ç»ˆç«¯çš„å­è¿›ç¨‹ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿå°±ä¸ä¼šå—åˆ°è¯¥ç»ˆç«¯çš„HUPä¿¡å·çš„å½±å“äº†ã€‚setsidå°±èƒ½å¸®åŠ©æˆ‘ä»¬åšåˆ°è¿™ä¸€ç‚¹ã€‚è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ setsid çš„å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;man setsid
SETSID&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                  Linux Programmerâ€™s Manual                 SETSID&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

NAME
       setsid - run a program &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;a new session

SYNOPSIS
       setsid program &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;arg...]

DESCRIPTION
       setsid runs a program &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;a new session.
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;setsidçš„ä½¿ç”¨ä¹ŸåŒæ ·å¾ˆç®€å•ï¼Œåªè¦åœ¨æ‰§è¡Œçš„å‘½ä»¤å‰åŠ ä¸Šsetsidå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;setsidä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;setsid ping www.ibm.com

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;UID&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;www.ibm.com&quot;&lt;/span&gt;
UID        PID    PPID   C  STIME TTY      TIME      CMD
LuzHo211   43482     1   0  16:13 ?        00:00:00  ping www.ibm.com
LuzHo211   43484  41875  0  16:13 pts/10   00:00:00  &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;UID&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;www.ibm.com
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä»»åŠ¡çš„è¿›ç¨‹IDä¸º43482ï¼Œè€Œå®ƒçš„çˆ¶è¿›ç¨‹IDä¸º1ï¼ˆå³ init è¿›ç¨‹IDï¼‰ï¼Œå¹¶ä¸æ˜¯å½“å‰ç»ˆç«¯çš„è¿›ç¨‹IDã€‚è¯´æ˜ä½¿ç”¨setsidä¹‹åï¼Œä»»åŠ¡è¿›ç¨‹å˜æˆäº†initè¿›ç¨‹çš„å­è¿›ç¨‹ï¼Œè€Œä¸æ˜¯å½“å‰ç»ˆç«¯è¿›ç¨‹çš„å­è¿›ç¨‹ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±ç®—æˆ‘ä»¬å½“å‰ç»ˆç«¯è¢«å…³é—­æˆ–è€…å½“å‰ç»ˆç«¯çš„ç½‘ç»œè·ŸæœåŠ¡å™¨å‘ç”Ÿä¸­æ–­ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡è¿›ç¨‹ä¹Ÿä¸ä¼šè¢«å…³é—­ã€‚&lt;/p&gt;

&lt;p&gt;ç›¸æ¯”nohupä¸­ä»»åŠ¡è¿›ç¨‹çš„çˆ¶è¿›ç¨‹IDï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nohup &lt;/span&gt;ping www.ibm.com &amp;amp;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1] 44109

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;UID&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;www.ibm.com&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;pts&quot;&lt;/span&gt;
UID        PID   PPID   C STIME TTY      TIME     CMD
LuzHo211   41875 41874  0 15:38 pts/10   00:00:00 &lt;span class=&quot;nt&quot;&gt;-bash&lt;/span&gt;
LuzHo211   44109 41875  0 16:22 pts/10   00:00:00 ping www.ibm.com
LuzHo211   44157 41875  0 16:23 pts/10   00:00:00 ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt;
LuzHo211   44158 41875  0 16:23 pts/10   00:00:00 &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;UID&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;www.ibm.com&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;pts
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºæˆ‘ä»¬çš„ä»»åŠ¡è¿›ç¨‹IDä¸º44109ï¼Œè€Œå…¶çˆ¶è¿›ç¨‹IDä¸º41875ï¼›41875å°±æ˜¯æˆ‘ä»¬å½“å‰ç»ˆç«¯çš„PIDã€‚&lt;/p&gt;

&lt;h4 id=&quot;3-&quot;&gt;3. &amp;amp;&lt;/h4&gt;

&lt;p&gt;è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå…³äºsubshellçš„å°æŠ€å·§ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå°†ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ååŒ…å«åœ¨â€œ()â€ä¸­å°±èƒ½è®©è¿™äº›å‘½ä»¤åœ¨å­shellä¸­è¿è¡Œä¸­ï¼Œä»è€Œæ‰©å±•å‡ºå¾ˆå¤šæœ‰è¶£çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç°åœ¨è¦è®¨è®ºçš„å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;p&gt;å½“æˆ‘ä»¬å°†â€&amp;amp;â€ä¹Ÿæ”¾å…¥â€œ()â€å†…ä¹‹åï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°æ‰€æäº¤çš„ä½œä¸šå¹¶ä¸åœ¨ä½œä¸šåˆ—è¡¨ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯æ— æ³•é€šè¿‡jobsæ¥æŸ¥çœ‹çš„ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆè¿™æ ·å°±èƒ½èº²è¿‡HUPä¿¡å·çš„å½±å“å§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;subshellç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ping www.ibm.com &amp;amp;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;UID&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;www.ibm.com&quot;&lt;/span&gt;
UID        PID  PPID  C STIME TTY          TIME CMD
root     24535     1  0 10:23 pts/2    00:00:00 ping www.ibm.com
root     24650 24560  0 10:26 pts/3    00:00:00 &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto UID&lt;span class=&quot;se&quot;&gt;\|&lt;/span&gt;www.ibm.com
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ä¸Šä¾‹ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ–°æäº¤çš„è¿›ç¨‹çš„çˆ¶è¿›ç¨‹IDï¼ˆPPIDï¼‰ä¸º1ï¼ˆå³initè¿›ç¨‹çš„PIDï¼‰ï¼Œå¹¶ä¸æ˜¯å½“å‰ç»ˆç«¯çš„è¿›ç¨‹IDã€‚å› æ­¤å¹¶ä¸å±äºå½“å‰ç»ˆç«¯çš„å­è¿›ç¨‹ï¼Œä»è€Œä¹Ÿå°±ä¸ä¼šå—åˆ°å½“å‰ç»ˆç«¯çš„HUPä¿¡å·çš„å½±å“äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;äºŒdisown-å‘½ä»¤&quot;&gt;äºŒã€disown å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;åœºæ™¯æè¿°ï¼š&lt;/strong&gt;&lt;br /&gt;
åœ¨æäº¤å‘½ä»¤ä¹‹å‰ï¼Œåœ¨å‘½ä»¤å‰åŠ ä¸Šnohupæˆ–è€…setsidå°±å¯ä»¥é¿å…HUPä¿¡å·çš„å½±å“ã€‚ä½†æ˜¯è‹¥æˆ‘ä»¬æœªåŠ ä»»ä½•å¤„ç†å°±å·²ç»æäº¤äº†å‘½ä»¤ï¼Œè¯¥å¦‚ä½•è¡¥æ•‘æ‰èƒ½è®©å®ƒé¿å…HUPä¿¡å·çš„å½±å“å‘¢ï¼Ÿ &lt;br /&gt;
&lt;strong&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;br /&gt;
è¿™æ—¶æƒ³åŠ nohupæˆ–setsidå·²ç»ä¸ºæ—¶å·²æ™šï¼Œåªèƒ½é€šè¿‡ä½œä¸šè°ƒåº¦å’Œdisownæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…ˆçœ‹ä¸€ä¸‹disownçš„å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;disown&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;jobspec ...]
    Without options, each jobspec is  removed  from  the  table  of
    active  jobs.   If  the &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; option is given, each jobspec is not
    removed from the table, but is marked so  that  SIGHUP  is  not
    sent  to the job &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;the shell receives a SIGHUP.  If no jobspec
    is present, and neither the &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; nor the &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; option  is  supplied,
    the  current  job  is  used.  If no jobspec is supplied, the &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt;
    option means to remove or mark all &lt;span class=&quot;nb&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; the &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; option  without
    a  jobspec  argument  restricts operation to running jobs.  The
    &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;value is 0 unless a jobspec does  not  specify  a  valid
    job.
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼æ¥è¾¾æˆæˆ‘ä»¬çš„ç›®çš„ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç”¨ disown -h &lt;em&gt;jobspec&lt;/em&gt; æ¥ä½¿æŸä¸ªä½œä¸šå¿½ç•¥HUPä¿¡å·ï¼›&lt;/li&gt;
  &lt;li&gt;ç”¨ disown -ah æ¥ä½¿æ‰€æœ‰çš„ä½œä¸šéƒ½å¿½ç•¥HUPä¿¡å·ï¼›&lt;/li&gt;
  &lt;li&gt;ç”¨ disown -rh æ¥ä½¿æ­£åœ¨è¿è¡Œçš„ä½œä¸šå¿½ç•¥HUPä¿¡å·ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨è¿‡disownä¹‹åï¼Œä¼šå°†æŠŠç›®æ ‡ä½œä¸šä»ä½œä¸šåˆ—è¡¨ä¸­ç§»é™¤ï¼Œæˆ‘ä»¬å°†ä¸èƒ½å†ä½¿ç”¨jobsæ¥æŸ¥çœ‹å®ƒï¼Œä½†æ˜¯ä¾ç„¶èƒ½å¤Ÿç”¨ps -efæŸ¥æ‰¾åˆ°å®ƒã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ç§æ–¹æ³•çš„æ“ä½œå¯¹è±¡æ˜¯ä½œä¸šï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¿è¡Œå‘½ä»¤æ—¶åœ¨ç»“å°¾åŠ äº†&lt;strong&gt;&amp;amp;&lt;/strong&gt;æ¥ä½¿å®ƒæˆä¸ºä¸€ä¸ªä½œä¸šå¹¶åœ¨åå°è¿è¡Œï¼Œé‚£ä¹ˆå°±ä¸‡äº‹å¤§å‰äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡jobså‘½ä»¤æ¥å¾—åˆ°æ‰€æœ‰ä½œä¸šçš„åˆ—è¡¨ã€‚ä½†æ˜¯å¦‚æœå¹¶æ²¡æœ‰æŠŠå½“å‰å‘½ä»¤ä½œä¸ºä½œä¸šæ¥è¿è¡Œï¼Œå¦‚ä½•æ‰èƒ½å¾—åˆ°å®ƒçš„ä½œä¸šå·å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ç”¨ctrl + zï¼ˆæŒ‰ä½ctrlé”®çš„åŒæ—¶æŒ‰ä½zé”®ï¼‰äº†ï¼&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;çµæ´»è¿ç”¨ ctrl + z&lt;/strong&gt; &lt;br /&gt;
æˆ‘ä»¬å¯ä»¥ç”¨ctrl + zæ¥å°†å½“å‰è¿›ç¨‹æŒ‚èµ·åˆ°åå°&lt;strong&gt;æš‚åœè¿è¡Œ&lt;/strong&gt;ï¼Œæ‰§è¡Œä¸€äº›åˆ«çš„æ“ä½œï¼›ç„¶åå†ç”¨ fg æ¥å°†æŒ‚èµ·çš„è¿›ç¨‹é‡æ–°æ”¾å›å‰å°ï¼ˆä¹Ÿå¯ç”¨ bg æ¥å°†æŒ‚èµ·çš„è¿›ç¨‹æ”¾åœ¨åå°ï¼‰ç»§ç»­è¿è¡Œã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸€ä¸ªç»ˆç«¯å†…çµæ´»åˆ‡æ¢è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ctrl + zçš„ç”¨é€”å°±æ˜¯å°†å½“å‰è¿›ç¨‹æŒ‚èµ·ï¼ˆSuspendï¼‰ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”¨jobså‘½ä»¤æ¥æŸ¥è¯¢å®ƒçš„ä½œä¸šå·ï¼Œå†ç”¨bg &lt;em&gt;jobspec&lt;/em&gt;æ¥å°†å®ƒæ”¾å…¥åå°å¹¶ç»§ç»­è¿è¡Œã€‚&lt;strong&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŒ‚èµ·ä¼šå½±å“å½“å‰è¿›ç¨‹çš„è¿è¡Œç»“æœï¼Œè¯·æ…ç”¨æ­¤æ–¹æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;disown ç¤ºä¾‹1ï¼š&lt;/strong&gt;æäº¤å‘½ä»¤æ—¶å·²ç»ç”¨&lt;strong&gt;&amp;amp;&lt;/strong&gt;å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨disown&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log &amp;amp;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1] 25259

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;jobs&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1]+  Running                 ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log &amp;amp;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;disown&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; %1

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;ping
root     25259 25167  0 11:02 pts/4    00:00:00 ping www.ibm.com
root     25261 25167  0 11:03 pts/4    00:00:00 &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto ping
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;æˆ‘åœ¨Ubuntuä¸Šè¯•è¿‡ï¼Œå½“æäº¤å‘½ä»¤çš„æ—¶å€™å°±ä½¿ç”¨&amp;amp;å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œå¦‚æœå½“å‰ç»ˆç«¯å…³é—­äº†ï¼Œæˆ‘ä»¬æäº¤çš„å‘½ä»¤å¹¶ä¸ä¼šè¢«ç»ˆæ­¢ï¼Œå¹¶ä¸”å‘½ä»¤ä¼šè‡ªåŠ¨è¢«æŒ‚åˆ°initè¿›ç¨‹ä¸‹é¢ï¼Œä¿æŒç»§ç»­è¿è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;disown ç¤ºä¾‹2ï¼š&lt;/strong&gt;æäº¤å‘½ä»¤æ—¶æœªä½¿ç”¨&lt;strong&gt;&amp;amp;&lt;/strong&gt;å°†å‘½ä»¤æ”¾å…¥åå°è¿è¡Œï¼Œå¯ä½¿ç”¨ctrl+z å’Œ bg å°†å…¶æ”¾å…¥åå°ï¼Œå†ä½¿ç”¨disown&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;// æäº¤å‘½ä»¤ï¼ˆä¸å¸¦&amp;amp;ï¼‰å¹¶ctrl + zå°†å‘½ä»¤æŒ‚èµ·
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log
^Z
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1]+  Stopped                 ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log

// jobsæŸ¥çœ‹ä½œä¸šåˆ—è¡¨ï¼Œçœ‹åˆ°å‘½ä»¤å·²ç»è¢«æŒ‚èµ·
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;jobs&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1]+  Stopped                 ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log

// ä½¿ç”¨bgå°†æŒ‚èµ·çš„ä»»åŠ¡æ”¾åˆ°åå°è¿è¡Œ
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;bg&lt;/span&gt; %1
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1]+ ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log &amp;amp;

// ä½¿ç”¨jobsæŸ¥çœ‹ï¼Œå‘ç°ä»»åŠ¡å·²ç»åœ¨åå°è¿è¡Œ
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;jobs&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1]+  Running                 ping www.ibm.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log &amp;amp;

// ä½¿ç”¨disown &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; æ¥è®©ä»»åŠ¡å…å—HUPä¿¡å·çš„å¹²æ‰°
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;disown&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; %1

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ps &lt;span class=&quot;nt&quot;&gt;-ef&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;ping
root     25382 25296  0 11:13 pts/6    00:00:00 ping www.ibm.com
root     25387 25296  0 11:16 pts/6    00:00:00 &lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;auto ping
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä¸‰screen-å‘½ä»¤&quot;&gt;ä¸‰ã€screen å‘½ä»¤&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;åœºæ™¯æè¿°ï¼š&lt;/strong&gt;&lt;br /&gt;
æˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•è®©è¿›ç¨‹å…å—HUPä¿¡å·çš„å½±å“ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤§é‡è¿™ç§å‘½ä»¤éœ€è¦åœ¨ç¨³å®šçš„åå°é‡Œè¿è¡Œï¼Œå¦‚ä½•é¿å…å¯¹æ¯æ¡å‘½ä»¤éƒ½åšè¿™æ ·çš„æ“ä½œå‘¢ï¼Ÿ &lt;br /&gt;
&lt;strong&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/strong&gt;&lt;br /&gt;
æ­¤æ—¶æœ€æ–¹ä¾¿çš„æ–¹æ³•å°±æ˜¯screenäº†ã€‚ç®€å•çš„è¯´ï¼Œscreenæä¾›äº†ANSI/VT100çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œä½¿å®ƒèƒ½å¤Ÿåœ¨ä¸€ä¸ªçœŸå®ç»ˆç«¯ä¸‹è¿è¡Œå¤šä¸ªå…¨å±çš„ä¼ªç»ˆç«¯ã€‚screençš„å‚æ•°å¾ˆå¤šï¼Œå…·æœ‰å¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨æ­¤ä»…ä»‹ç»å…¶å¸¸ç”¨åŠŸèƒ½ä»¥åŠç®€è¦åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä½¿ç”¨screenèƒ½å¤Ÿé¿å…HUPä¿¡å·çš„å½±å“ã€‚å…ˆçœ‹ä¸€ä¸‹screençš„å¸®åŠ©ä¿¡æ¯ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;SCREEN&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                                                           SCREEN&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
 
NAME
       screen - screen manager with VT100/ANSI terminal emulation
 
SYNOPSIS
       screen &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; cmd &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; args &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
       screen &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt;pid.]tty[.host]]
       screen &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; sessionowner/[[pid.]tty[.host]]
 
DESCRIPTION
       Screen  is  a  full-screen  window manager that multiplexes a physical
       terminal between several  processes  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;typically  interactive  shells&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
       Each  virtual  terminal provides the functions of a DEC VT100 terminal
       and, &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;addition, several control functions from the  ISO  6429  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ECMA
       48,  ANSI  X3.64&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  and ISO 2022 standards &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;e.g. insert/delete line and
       support &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;multiple character sets&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;  There is a  scrollback  &lt;span class=&quot;nb&quot;&gt;history
       &lt;/span&gt;buffer  &lt;span class=&quot;k&quot;&gt;for  &lt;/span&gt;each virtual terminal and a copy-and-paste mechanism that
       allows moving text regions between windows.
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;screençš„ä½¿ç”¨ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨é€‰é¡¹ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç”¨ screen -dmS &lt;em&gt;session name&lt;/em&gt; æ¥å»ºç«‹ä¸€ä¸ªå¤„äºæ–­å¼€æ¨¡å¼ä¸‹çš„ä¼šè¯ï¼ˆå¹¶æŒ‡å®šå…¶ä¼šè¯åï¼‰;&lt;/li&gt;
  &lt;li&gt;ç”¨ screen -list æ¥åˆ—å‡ºæ‰€æœ‰ä¼šè¯ï¼›&lt;/li&gt;
  &lt;li&gt;ç”¨ screen -r &lt;em&gt;session name&lt;/em&gt; æ¥é‡æ–°è¿æ¥æŒ‡å®šä¼šè¯ï¼›&lt;/li&gt;
  &lt;li&gt;ç”¨å¿«æ·é”® ctrl+a d æ¥æš‚æ—¶æ–­å¼€å½“å‰ä¼šè¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;screen ç¤ºä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;screen &lt;span class=&quot;nt&quot;&gt;-dmS&lt;/span&gt; Urumchi

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;screen &lt;span class=&quot;nt&quot;&gt;-list&lt;/span&gt;
There is a screen on:
	26332.Urumchi	&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;02/26/2020 12:08:50 PM&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;	&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;Detached&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
1 Socket &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; /var/run/screen/S-root.

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;screen &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; Urumchi
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å½“æˆ‘ä»¬ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;-r&lt;/code&gt;å‚æ•°è¿æ¥åˆ°screenä¼šè¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªä¼ªç»ˆç«¯é‡Œé¢ä¸ºæ‰€æ¬²ä¸ºï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒHUPä¿¡å·ä¼šå¯¹æˆ‘ä»¬çš„è¿›ç¨‹é€ æˆå½±å“ï¼Œä¹Ÿä¸ç”¨ç»™æ¯ä¸ªå‘½ä»¤å‰éƒ½åŠ ä¸Šnohupæˆ–è€…setsidäº†ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘æ¥çœ‹ä¸€ä¸‹ä¸‹é¢ä¸¤ä¸ªä¾‹å­å§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1. æœªä½¿ç”¨ screen æ—¶æ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ping www.baidu.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log &amp;amp;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1] 26366

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pstree &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; 26366
systemdâ”€â”¬â”€AliYunDunâ”€â”€â”€23&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;AliYunDun&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;
        â”œâ”€AliYunDunUpdateâ”€â”€â”€3&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;AliYunDunUpdate&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;    
        â””â”€sshdâ”€â”¬â”€7&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;sshdâ”€â”€â”€bash]
               â””â”€sshdâ”€â”€â”€bashâ”€â”¬â”€ping
                             â””â”€pstree

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹å‡ºï¼Œæœªä½¿ç”¨screenæ—¶æˆ‘ä»¬æ‰€å¤„çš„bashæ˜¯sshdçš„å­è¿›ç¨‹ï¼Œå½“sshæ–­å¼€è¿æ¥æ—¶ï¼ŒHUPä¿¡å·è‡ªç„¶ä¼šå½±å“åˆ°å®ƒä¸‹é¢çš„æ‰€æœ‰å­è¿›ç¨‹ï¼ˆåŒ…æ‹¬æˆ‘ä»¬æ–°å»ºç«‹çš„pingè¿›ç¨‹ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2. ä½¿ç”¨äº† screen åæ–°è¿›ç¨‹çš„è¿›ç¨‹æ ‘ï¼š&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;screen &lt;span class=&quot;nt&quot;&gt;-dmS&lt;/span&gt; my_new_session

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;screen &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; my_new_session

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ping www.baidu.com &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ping.log &amp;amp;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;1] 26421

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;pstree &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; 26421
systemdâ”€â”¬â”€AliYunDunâ”€â”€â”€23&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;AliYunDun&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;
        â”œâ”€AliYunDunUpdateâ”€â”€â”€3&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;AliYunDunUpdate&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;
        â”œâ”€screenâ”€â”€â”€bashâ”€â”¬â”€ping
        â”‚               â””â”€pstree
        â””â”€sshdâ”€â”¬â”€8&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;sshdâ”€â”€â”€bash]
               â””â”€sshdâ”€â”€â”€bashâ”€â”€â”€screen
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº†screenä¹‹åï¼Œæˆ‘ä»¬æ‰€å¤„çš„bashåˆ™å˜æˆäº†screenè¿›ç¨‹çš„å­è¿›ç¨‹ï¼Œè€Œscreenåˆæ˜¯systemdçš„å­è¿›ç¨‹ã€‚é‚£ä¹ˆå½“sshæ–­å¼€è¿æ¥æ—¶ï¼ŒHUPä¿¡å·è‡ªç„¶ä¸ä¼šå½±å“åˆ°screenä¸‹é¢çš„å­è¿›ç¨‹äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å››æ€»ç»“&quot;&gt;å››ã€æ€»ç»“&lt;/h3&gt;

&lt;p&gt;ç°åœ¨å‡ ç§æ–¹æ³•å·²ç»ä»‹ç»å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥é€‰æ‹©ä¸åŒçš„æ–¹æ¡ˆã€‚nohup/setsidæ— ç–‘æ˜¯ä¸´æ—¶éœ€è¦æ—¶æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œdisownèƒ½å¸®åŠ©æˆ‘ä»¬æ¥äº‹åè¡¥æ•‘å½“å‰å·²ç»åœ¨è¿è¡Œäº†çš„ä½œä¸šï¼Œè€Œscreenåˆ™æ˜¯åœ¨å¤§æ‰¹é‡æ“ä½œæ—¶ä¸äºŒçš„é€‰æ‹©äº†ã€‚&lt;/p&gt;

</description>
        <pubDate>Tue, 25 Feb 2020 01:00:00 +0000</pubDate>
        <link>http://pandaq.xyz/2020/02/25/linux-nohup/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2020/02/25/linux-nohup/</guid>
        
        <category>Linux</category>
        
        
      </item>
    
      <item>
        <title>Mac OSä¸‹iTerm2ç»ˆç«¯é…åˆrz/szè¿›è¡Œè¿œç¨‹æ–‡ä»¶çš„ä¸‹è½½/ä¸Šä¼ </title>
        <description>&lt;p&gt;&lt;img src=&quot;/assets/images/2020-01/iterm2-logo2x.jpg&quot; alt=&quot;iterm2-logo2x.jpg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Mac OSä¸‹ä½¿ç”¨iTerm2ç»ˆç«¯æ—¶ï¼Œç»å¸¸ä¼šä½¿ç”¨SSHæ–¹å¼ç™»å½•åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œç„¶åä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ã€‚ä¸€èˆ¬æƒ…å†µä½¿ç”¨scpå‘½ä»¤æˆ–è€…XFtpåº”ç”¨æ¥ç›´æ¥ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœè¿œç¨‹æœåŠ¡å™¨è·Ÿæˆ‘ä»¬ç”µè„‘ä¹‹é—´éš”äº†ä¸€å±‚è·³æ¿æœºï¼Œscpå’ŒXFtpå°±ä¸å¤ªå¥½ç”¨äº†ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨sz/rzå‘½ä»¤æ¥ä¸Šä¼ /ä¸‹è½½æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸€å®‰è£…lrzszç¨‹åºåŒ…&quot;&gt;ä¸€ã€å®‰è£…lrzszç¨‹åºåŒ…&lt;/h3&gt;

&lt;p&gt;szå’Œrzå‘½ä»¤æ˜¯lrzszç¨‹åºåŒ…æä¾›çš„ä¸¤ä¸ªå‘½ä»¤ï¼Œæ‰€ä»¥å…ˆå®‰è£…lrzszç¨‹åºåŒ…ã€‚è¿™é‡Œé€šè¿‡&lt;a href=&quot;https://brew.sh&quot;&gt;Homebrew&lt;/a&gt;æ¥å®‰è£…lrzszç¨‹åºåŒ…ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…Homebrewï¼Œè¯·å…ˆè‡ªè¡Œå®‰è£…ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;lrzsz
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;äºŒiterm2çš„ç›¸å…³é…ç½®è„šæœ¬&quot;&gt;äºŒã€iTerm2çš„ç›¸å…³é…ç½®è„šæœ¬&lt;/h3&gt;

&lt;p&gt;å…ˆä¸‹è½½è¿™ä¸¤ä¸ªè„šæœ¬æ–‡ä»¶ï¼š&lt;a href=&quot;/assets/files/iterm2-send-zmodem.sh&quot;&gt;iterm2-send-zmodem.sh&lt;/a&gt; å’Œ &lt;a href=&quot;/assets/files/iterm2-recv-zmodem.sh&quot;&gt;iterm2-recv-zmodem.sh&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å°†&lt;code class=&quot;highlighter-rouge&quot;&gt;iterm2-send-zmodem.sh&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;iterm2-recv-zmodem.sh&lt;/code&gt;è„šæœ¬æ”¾åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/bin&lt;/code&gt;ç›®å½•ä¸‹ï¼Œå¹¶èµ‹äºˆå¯æ‰§è¡Œçš„æƒé™ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;chmod&lt;/span&gt; +x /usr/local/bin/iterm2-send-zmodem.sh /usr/local/bin/iterm2-recv-zmodem.sh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä¸‰é…ç½®iterm2&quot;&gt;ä¸‰ã€é…ç½®iTerm2&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;æ‰¾åˆ°iTerm2çš„é…ç½®é¡¹ï¼šiTerm2çš„Preferences -&amp;gt; Profiles -&amp;gt; Default -&amp;gt; Advanced -&amp;gt; Triggers&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»Triggersçš„EditæŒ‰é’®ï¼ŒæŒ‰ç…§ä»¥ä¸‹è¡¨æ ¼è¿›è¡Œé…ç½®ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Regular Expression&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Action&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Parameters&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;Instant&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;rz waiting to receive.\*\*B0100&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Run Silent Coprocess&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;/usr/local/bin/iterm2-send-zmodem.sh&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;checked&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;\*\*B00000000000000&lt;/code&gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Run Silent Coprocess&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;/usr/local/bin/iterm2-recv-zmodem.sh&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;checked&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šæœ€åä¸€é¡¹Instantä¸€å®šè¦å‹¾é€‰ä¸Šï¼&lt;/strong&gt; å¦‚ä¸‹å›¾çš„é…ç½®ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020-01/iterm2-config.png&quot; alt=&quot;iterm2-config.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;
&lt;em&gt;å‚è€ƒæ–‡ç« &lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;1. &lt;a href=&quot;https://molunerfinn.com/iTerm2-lrzsz/#%E9%85%8D%E7%BD%AEiTerm2&quot;&gt;OSXä¸‹iTerm2å®ç°rz/szä¸æœåŠ¡å™¨è¿›è¡Œæ–‡ä»¶ä¸Šä¼ /ä¸‹è½½&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 13 Jan 2020 07:25:13 +0000</pubDate>
        <link>http://pandaq.xyz/2020/01/13/iterm2-lrzsz/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2020/01/13/iterm2-lrzsz/</guid>
        
        <category>å·¥å…·é›†</category>
        
        
      </item>
    
      <item>
        <title>å›¾ç‰‡å‹ç¼©å·¥å…·</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;å‘ç°ä¸€æ¬¾åœ¨çº¿çš„å›¾ç‰‡å‹ç¼©äº§å“ï¼Œæ¯”è¾ƒå¥½ç”¨ï¼Œè®°å½•ä¸€ä¸‹ï¼š&lt;a href=&quot;https://www.picdiet.com/zh-cn&quot;&gt;picdiet&lt;/a&gt;ã€‚å†™æ–‡ç« çš„æ—¶å€™å…ä¸äº†è¦æ”¾å›¾ç‰‡ï¼Œå›¾ç‰‡å¤ªå¤§ä¼šå½±å“ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œç”¨è¿™ä¸ªå·¥å…·å‹ç¼©ä¸€ä¸‹ï¼Œæ£’ï¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020-01/picdiet.jpg&quot; alt=&quot;picdiet.jpg&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿˜æœ‰è¿™ä¸ªï¼š&lt;a href=&quot;https://tinypng.com&quot;&gt;tinypng&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020-01/tinypng.jpg&quot; alt=&quot;tiny.png&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿˜æœ‰è¿™ä¸ªç½‘ç«™ï¼š&lt;a href=&quot;https://tiomg.org/image&quot;&gt;tiomg&lt;/a&gt;ã€‚è¿™ä¸ªç½‘ç«™å‰å®³äº†ï¼Œä¸ä»…å¯ä»¥å‹ç¼©å›¾ç‰‡ï¼Œè¿˜èƒ½è½¬æ¢å›¾ç‰‡æ ¼å¼ã€åˆ¶ä½œç½‘é¡µfaviconä»¥åŠæ‹¼æ¥å›¾ç‰‡ã€‚ä¸è¿‡ç”¨äº†ä¸€ä¸‹ï¼Œä½“éªŒå¥½åƒæ²¡ä¸Šé¢ä¸¤æ¬¾å¥½ğŸ˜³ğŸ˜³ğŸ˜³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020-01/tiomg.png&quot; alt=&quot;tiomg.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰å¾ˆå¤šç±»ä¼¼åœ¨çº¿å›¾ç‰‡å‹ç¼©ç½‘ç«™ï¼Œå°±ä¸ä¸€ä¸€ç½—åˆ—äº†ã€‚ä¸Šé¢ä»‹ç»çš„ç½‘ç«™éƒ½æ˜¯å…è´¹çš„ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿˜æœ‰ä¸€ç§æ¯”è¾ƒç®€å•çš„ç¦»çº¿å‹ç¼©æ–¹å¼ï¼Œæ‰“å¼€Microsoft Wordæ–°å»ºä¸€ä¸ªç©ºç™½æ–‡æ¡£ï¼Œå°†å›¾ç‰‡å¤åˆ¶è¿›å»ï¼Œç„¶åå³é”®å°†å›¾ç‰‡å¦å­˜ï¼Œå°±èƒ½è¾¾åˆ°ç®€å•å‹ç¼©å›¾ç‰‡çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Fri, 10 Jan 2020 07:05:57 +0000</pubDate>
        <link>http://pandaq.xyz/2020/01/10/picture-compress/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2020/01/10/picture-compress/</guid>
        
        <category>å·¥å…·é›†</category>
        
        
      </item>
    
      <item>
        <title>LinuxæŸ¥æ‰¾æ–‡ä»¶çš„å‘½ä»¤</title>
        <description>&lt;p&gt;æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°LinuxæŸ¥æ‰¾æŸä¸ªæ–‡ä»¶çš„å‘½ä»¤ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹è‡ªå·±å¸¸ç”¨çš„å‡ ä¸ªã€‚å‚è€ƒé¸Ÿå“¥çš„Linuxå­¦ä¹ ç½‘ç«™ï¼š&lt;a href=&quot;http://linux.vbird.org&quot;&gt;é³¥å“¥çš„ Linux ç§æˆ¿èœ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸€find&quot;&gt;ä¸€ã€find&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;Linuxä¸‹æœ€å¸¸è§ã€æœ€å¼ºå¤§çš„æ–‡ä»¶æŸ¥æ‰¾å‘½ä»¤ç®—æ˜¯findå‘½ä»¤äº†ã€‚findå‘½ä»¤ç›´æ¥æœç´¢ç£ç›˜ç›®å½•ï¼Œè™½ç„¶éå†ç£ç›˜ç›®å½•æ•ˆç‡ä½ï¼Œä½†æ˜¯å´å¯ä»¥æ‰¾åˆ°ä½ æƒ³æ‰¾çš„ä»»ä½•æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;find [PATH] [option] [action]

PATH   - æŒ‡å®šæœç´¢çš„ç›®å½•ï¼Œå¯é€‰ã€‚å¦‚æœä¸æŒ‡å®šæœç´¢ç›®å½•ï¼Œåˆ™é»˜è®¤æœç´¢å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ã€‚
option - æŒ‡å®šæœç´¢çš„é€‰é¡¹å’Œå‚æ•°ï¼Œå¯é€‰ã€‚
action - é¢å¤–æ‰§è¡Œçš„åŠ¨ä½œï¼Œå¯é€‰ã€‚
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é‡ç‚¹çœ‹æœç´¢çš„é€‰é¡¹å’Œå‚æ•°ï¼š[option]ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸æ–‡ä»¶æƒé™å’Œæ–‡ä»¶åç§°æœç´¢ç›¸å…³çš„å‚æ•°ï¼ˆåªåˆ—å‡ºéƒ¨åˆ†å‚æ•°ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nt&quot;&gt;-name&lt;/span&gt; filenameï¼šä½¿ç”¨-nameå‚æ•°æ¥æŒ‡å®šæœç´¢åç§°ä¸º filename çš„æ–‡ä»¶ã€‚
&lt;span class=&quot;nt&quot;&gt;-size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;+-]SIZEï¼šæœç´¢æ¯”SIZEè¿˜è¦å¤§&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;+&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;æˆ–å°&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;-&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;çš„æ–‡ä»¶ã€‚
                SIZEçš„å•ä½å¯ä»¥ä¸ºï¼šcï¼šè¡¨ç¤ºbyteï¼›kè¡¨ç¤º2014Bï¼›Mè¡¨ç¤º2014kBï¼›Gè¡¨ç¤º1024MB
                ä¾‹å¦‚è¦æœç´¢æ¯”1GBè¿˜è¦å¤§çš„æ–‡ä»¶ï¼Œå°±æ˜¯ï¼š-size +1G  
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;èŒƒä¾‹1ï¼šæŸ¥æ‰¾æ–‡ä»¶åä¸º hosts çš„æ–‡ä»¶&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;$ find / -name hosts
/var/cache/nscd/hosts
/var/lib/docker/containers/7fef2acae8e8dc2156f8387cbf3b98aab1b582c981af4ef536a53277d248acf4/hosts
/etc/hosts
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;èŒƒä¾‹2ï¼šç»“åˆé€šé…ç¬¦&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;è¿›è¡Œæ–‡ä»¶åçš„æ¨¡ç³Šæœç´¢ï¼Œç»“æœçœ‹å‡ºæ–‡ä»¶ååŒ…å«hostså…³é”®å­—çš„éƒ½æœå‡ºæ¥äº†&lt;/em&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;$ find / -name &quot;*hosts*&quot;
/etc/hosts
/etc/hosts.allow
/etc/hosts.deny
/lib/x86_64-linux-gnu/security/pam_rhosts.so
/usr/share/vim/vim74/ftplugin/hostsaccess.vim
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šé…ç¬¦&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;å¯ä»¥åŒ¹é…ä»»æ„çš„å­—ç¬¦ã€‚å¦‚æœè¦æ‰¾æ–‡ä»¶åä»¥hostså¼€å¤´çš„æ–‡ä»¶ï¼Œåˆ™åº”è¯¥ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;hosts*&quot;&lt;/code&gt;ï¼›å¦‚æœè¦æ‰¾æ–‡ä»¶åä»¥hostsç»“å°¾çš„æ–‡ä»¶ï¼Œåº”è¯¥ä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;*hosts&quot;&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œfindå‘½ä»¤æ˜¯ç›´æ¥æœç´¢ç¡¬ç›˜çš„ï¼Œæ‰€ä»¥æœç´¢æ—¶ä¼šæ¯”è¾ƒæ¶ˆè€—ç£ç›˜ã€‚&lt;/p&gt;

&lt;h3 id=&quot;äºŒlocate&quot;&gt;äºŒã€locate&lt;/h3&gt;

&lt;p&gt;locateå‘½ä»¤ä¸findä¸åŒï¼Œå®ƒä¸ä¼šç›´æ¥æœç´¢ç¡¬ç›˜ï¼Œè€Œæ˜¯æŸ¥è¯¢ä¸€ä¸ªæ–‡ä»¶å­˜æ¡£æ•°æ®åº“ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;var/lib/mlocate/mlocate.db&lt;/code&gt;ï¼Œæ‰€ä»¥locateçš„æœç´¢æ•ˆç‡ä¼šæ¯”findé«˜å¾ˆå¤šã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;var/lib/mlocate/mlocate.db&lt;/code&gt;é‡Œé¢ç»´æŠ¤äº†ç¡¬ç›˜é‡Œé¢æ‰€æœ‰æ–‡ä»¶çš„åˆ›å»ºï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹Linuxåªä¼šæ¯å¤©é€šè¿‡æ‰«æç¡¬ç›˜æ¥æ›´æ–°è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™æ—¶å€™æ–°å»ºæˆ–è€…åˆ é™¤çš„æ–‡ä»¶æ‰èƒ½æ„ŸçŸ¥åˆ°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ç°åœ¨æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç«‹å³ç”¨locateæ¥æœç´¢ï¼Œæ˜¯æœç´¢ä¸åˆ°çš„ã€‚&lt;/p&gt;

&lt;p&gt;locateå‘½ä»¤ç›´æ¥å°±æ˜¯æ¨¡ç³Šæœç´¢ï¼Œè¿˜æ˜¯æŒºå¥½ç”¨çš„ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;locate password
/var/lib/pam/password
/usr/share/man/man1/systemd-tty-ask-password-agent.1.gz
/usr/share/man/man8/systemd-ask-password-console.path.8.gz
/usr/share/man/man8/systemd-ask-password-console.service.8.gz
/usr/share/man/man8/systemd-ask-password-wall.path.8.gz
/usr/share/man/man8/systemd-ask-password-wall.service.8.gz
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœæˆ‘ç°åœ¨æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åæœç´¢è¯¥æ–‡ä»¶ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;touch &lt;/span&gt;test-file
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;locate test-file
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å°†ä¼šæœç´¢ä¸åˆ°test-fileè¿™ä¸ªæ–‡ä»¶ï¼Œå› ä¸ºæ•°æ®åº“è¿˜æ²¡æœ‰è¢«æ›´æ–°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ›´æ–°&lt;code class=&quot;highlighter-rouge&quot;&gt;var/lib/mlocate/mlocate.db&lt;/code&gt;æ•°æ®åº“ï¼Œä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;updatedb&lt;/code&gt;å‘½ä»¤ã€‚ç„¶åå†æœç´¢test-fileï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;updatedb
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;locate test-file
/root/test-file
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™å°±èƒ½æœç´¢åˆ°test-fileæ–‡ä»¶äº†ã€‚åŒæ ·çš„ï¼Œå¦‚æœæŸä¸ªæ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œåœ¨æ²¡æœ‰æ›´æ–°&lt;code class=&quot;highlighter-rouge&quot;&gt;var/lib/mlocate/mlocate.db&lt;/code&gt;æ•°æ®åº“ä¹‹å‰ï¼Œé€šè¿‡locateè¿˜æ˜¯èƒ½æœç´¢åˆ°è¯¥æ–‡ä»¶çš„ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;updatedbå‘½ä»¤ä¼šæ ¹æ®/etc/updatedb.confé…ç½®æ–‡ä»¶ä¸­çš„é…ç½®å»æœç´¢å¯¹åº”çš„ç›®å½•æ–‡ä»¶ï¼Œç„¶åæ›´æ–°/var/lib/mlocateç›®å½•ä¸­çš„æ–‡ä»¶æ¡£æ¡ˆæ•°æ®åº“ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ä¸‰which&quot;&gt;ä¸‰ã€which&lt;/h3&gt;

&lt;p&gt;whichå‘½ä»¤ç”¨äºæœç´¢å¯æ‰§è¡Œçš„å‘½ä»¤æ–‡ä»¶ï¼Œä¾‹å¦‚æŸ¥æ‰¾&lt;code class=&quot;highlighter-rouge&quot;&gt;vim&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;ls&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;touch&lt;/code&gt;ç­‰å‘½ä»¤ï¼Œæƒ³çŸ¥é“æŸä¸ªLinuxå‘½ä»¤ä½äºå“ªä¸ªç›®å½•ä¸‹ï¼Œç”¨whichå°±å¯¹äº†ã€‚whichä¼šæ ¹æ®PATHç¯å¢ƒå˜é‡ä¸­è®¾å®šçš„ç›®å½•å»æŸ¥æ‰¾å‘½ä»¤æ–‡ä»¶ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;èŒƒä¾‹1ï¼šæœç´¢whichå‘½ä»¤æ‰€åœ¨ç›®å½•
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which which
/sbin/ifconfig

èŒƒä¾‹2ï¼šæœç´¢lså‘½ä»¤æ‰€åœ¨ç›®å½•
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which &lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt;
/bin/ls

èŒƒä¾‹3ï¼šæœç´¢historyå‘½ä»¤æ‰€åœ¨ç›®å½•
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;which &lt;span class=&quot;nb&quot;&gt;history

&lt;/span&gt;æœç´¢ä¸åˆ°historyï¼Œå› ä¸ºhistoryæ˜¯bashå†…å»ºçš„å‘½ä»¤ï¼Œå¹¶ä¸åœ¨PATHæ‰€æŒ‡å®šçš„ç›®å½•ä¸­ã€‚
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å››whereis&quot;&gt;å››ã€whereis&lt;/h3&gt;

&lt;p&gt;whereiså‘½ä»¤è·Ÿfindå‘½ä»¤ä¸€æ ·ä¹Ÿæ˜¯ç›´æ¥æœç´¢ç¡¬ç›˜ï¼Œåªä¸è¿‡whereisæœç´¢çš„æ˜¯ç‰¹å®šçš„ä¸€äº›ç›®å½•ã€‚ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;whereis -l&lt;/code&gt;æ¥æŸ¥çœ‹whereiså‘½ä»¤æœç´¢çš„ç›®å½•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;whereis &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
bin: /usr/bin
bin: /usr/sbin
... ...
man: /usr/share/man/pt
man: /usr/share/info
src: /usr/src/linux-headers-4.4.0-148-generic
src: /usr/src/linux-headers-4.4.0-159-generic
src: /usr/src/linux-headers-4.4.0-148
src: /usr/src/linux-headers-4.4.0-159
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;
&lt;em&gt;å‚è€ƒæ–‡ç« &lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;1. &lt;a href=&quot;http://linux.vbird.org/linux_basic/0220filemanager.php#file_find&quot;&gt;6.5 æŒ‡ä»¤èˆ‡æª”æ¡ˆçš„æœå°‹&lt;/a&gt;&lt;/em&gt; &lt;br /&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 27 Dec 2019 09:28:34 +0000</pubDate>
        <link>http://pandaq.xyz/2019/12/27/linux-search-file/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2019/12/27/linux-search-file/</guid>
        
        <category>Linux</category>
        
        
      </item>
    
      <item>
        <title>CASå•ç‚¹ç™»å½•æŠ€æœ¯ï¼ˆä¸€ï¼‰</title>
        <description>&lt;h3 id=&quot;ä¸€sso-å’Œcas&quot;&gt;ä¸€ã€SSO å’ŒCAS&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨ä¼ä¸šåº”ç”¨å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šä½¿ç”¨åˆ°å•ç‚¹ç™»å½•æŠ€æœ¯ï¼ˆSingle Sign-onï¼‰æ¥å¤„ç†ä¼ä¸šçš„å„ä¸ªåº”ç”¨ä¹‹é—´çš„å…±äº«ç™»å½•åœºæ™¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é€šå¸¸ï¼Œä¼ä¸šå†…éƒ¨ä¼šæœ‰å¤šä¸ªåº”ç”¨ï¼Œæ¯ä¸ªåº”ç”¨éƒ½éœ€è¦ç”¨æˆ·ç™»å½•ä¹‹åæ‰èƒ½å…è®¸ç”¨æˆ·è®¿é—®å…¶å†…å®¹ã€‚ç°å®ä¸­ï¼Œä¸€èˆ¬ä¸ä¼šä¸ºæ¯ä¸ªåº”ç”¨éƒ½å®ç°ä¸€å¥—ç™»å½•é€»è¾‘ï¼Œå› ä¸ºè¿™æ ·åšæ—¢è´¹æ—¶ã€è´¹åŠ›åˆéš¾ä»¥ç»´æŠ¤ã€‚è€Œæ˜¯é€šè¿‡ä¸€ä¸ªç»Ÿä¸€ç™»å½•æœåŠ¡ï¼Œè®©æ¯ä¸ªåº”ç”¨éƒ½æ¥å…¥è¿™ä¸ªç»Ÿä¸€ç™»å½•æœåŠ¡ï¼Œè¿™ä¸ªç™»å½•æœåŠ¡å¯ä»¥åœ¨å„ä¸ªåº”ç”¨ä¹‹é—´å…±äº«ç™»å½•æ€ã€‚å³ï¼Œå½“ç”¨æˆ·åœ¨å…¶ä¸­ä¸€ä¸ªåº”ç”¨ç™»å½•æˆåŠŸä¹‹åï¼Œåœ¨ç»§ç»­è®¿é—®ä¼ä¸šä¸­çš„å…¶ä»–ä»»ä½•åº”ç”¨çš„æ—¶å€™éƒ½ä¸éœ€è¦é‡æ–°ç™»å½•ï¼Œä»è€Œè¾¾åˆ°æå‡ç”¨æˆ·ä½“éªŒçš„æ•ˆæœã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¯•æƒ³ï¼Œå¦‚æœæŸä¸ªä¼ä¸šæ‹¥æœ‰10ä¸ªåº”ç”¨æœåŠ¡å¹¶ä¸”ç”¨æˆ·æ¯å¤©éƒ½ä¼šä½¿ç”¨è¿™10ä¸ªæœåŠ¡ï¼Œç”¨æˆ·æ¯è®¿é—®ä¸€ä¸ªåº”ç”¨éƒ½éœ€è¦é‡æ–°å¡«å†™è´¦å·å¯†ç è¿›è¡Œç™»å½•ï¼Œç”¨æˆ·ä½“éªŒæ˜¯ä¸æ˜¯å¾ˆå·®ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å•ç‚¹ç™»å½•æŠ€æœ¯ï¼ˆSSOï¼‰å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§åœºæ™¯è€Œç”Ÿçš„ã€‚ç”¨æˆ·åœ¨ä¸€æ¬¡æˆåŠŸç™»å½•ä¹‹åï¼Œåªè¦æœ¬æ¬¡ç™»å½•æœªè¿‡æœŸï¼Œç”¨æˆ·å°±å¯ä»¥ç›´æ¥è®¿é—®æ¥å…¥äº†åŒä¸€ä¸ªå•ç‚¹ç™»å½•æœåŠ¡çš„å…¶ä»–åº”ç”¨ï¼Œè€Œä¸éœ€è¦å†ç™»å½•ä¸€æ¬¡ã€‚å³ï¼Œ&lt;strong&gt;ä¸€å¤„ç™»å½•ï¼Œå¤„å¤„è®¿é—®&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;SSOæ˜¯ä¸€ç§æ¶æ„è®¾è®¡ï¼ŒCASåˆ™æ˜¯SSOçš„ä¸€ç§å®ç°ã€‚CASï¼ˆCentral Authentication Serviceï¼‰å•ç‚¹ç™»å½•æŠ€æœ¯æ˜¯ &lt;a href=&quot;https://www.apereo.org&quot;&gt;Apereo&lt;/a&gt; çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œè¯¥é¡¹ç›®åŒ…å«äº†CASå•ç‚¹ç™»å½•åè®®ã€CASå®¢æˆ·ç«¯ä»¥åŠCASæœåŠ¡å™¨ç­‰é¡¹ç›®ï¼ˆ&lt;a href=&quot;https://www.apereo.org/projects/cas&quot;&gt;CASå®˜ç½‘åœ°å€&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;äºŒcasæ¶æ„&quot;&gt;äºŒã€CASæ¶æ„&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2019-12/cas_architecture.png&quot; alt=&quot;cas_architecture&quot; /&gt;&lt;/p&gt;

&lt;p&gt;CAS Clientsæ˜¯å„ç§æ¥å…¥äº†CASå•ç‚¹ç™»å½•æœåŠ¡çš„ä¸šåŠ¡åº”ç”¨ï¼›CAS Serverå°±æ˜¯å•ç‚¹ç™»å½•æœåŠ¡å™¨ã€‚å„ä¸ªåº”ç”¨å¯ä»¥é€šè¿‡å„ç§åè®®æ¥å…¥CASæœåŠ¡å™¨ï¼Œä¾‹å¦‚CASã€SALMLä»¥åŠOAuthåè®®ç­‰ï¼ˆæœ¬æ–‡åªä»‹ç» &lt;a href=&quot;https://apereo.github.io/cas/6.1.x/protocol/CAS-Protocol.html&quot;&gt;CAS Protocol&lt;/a&gt;ï¼‰ï¼›CASæœåŠ¡å™¨æ”¯æŒå¤šç§ç”¨æˆ·è®¤è¯ä¿¡æ¯æ•°æ®æºï¼Œä¾‹å¦‚LDAPã€Databaseä»¥åŠActive Directoryç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…åœºæ™¯æ¥é€‰æ‹©ä¸åŒçš„æ•°æ®æºã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸‰casåè®®cas-protocol&quot;&gt;ä¸‰ã€CASåè®®ï¼ˆCAS Protocolï¼‰&lt;/h3&gt;

&lt;p&gt;CASåè®®ï¼ˆ&lt;a href=&quot;https://apereo.github.io/cas/6.1.x/protocol/CAS-Protocol-Specification.html&quot;&gt;CAS-Protocol-Specification&lt;/a&gt;ï¼‰å½“å‰æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼šCAS 1.0ã€2.0ä»¥åŠ3.0&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;CAS 1.0 â€”â€” åŸºç¡€æ¨¡å¼ï¼Œä»…æä¾›WEBåº”ç”¨ä¹‹é—´çš„å•ç‚¹ç™»å½•ï¼›&lt;/li&gt;
  &lt;li&gt;CAS 2.0 â€”â€” ä»£ç†æ¨¡å¼ï¼Œå¯ä»¥ç”¨äºWEBåº”ç”¨æˆ–è€…éWEBåº”ç”¨ä¹‹é—´çš„å•ç‚¹ç™»å½•ï¼Œä¾‹å¦‚ç§»åŠ¨åº”ç”¨+WEBåº”ç”¨ç­‰ï¼›&lt;/li&gt;
  &lt;li&gt;CAS 3.0 â€”â€” åœ¨å…¼å®¹1.0å’Œ2.0çš„åŸºç¡€ä¸Šï¼Œæ–°å¢äº†å…¶ä»–æ›´é«˜çº§çš„ç‰¹æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™é‡Œåªä»‹ç»CAS 1.0ç‰ˆæœ¬çš„åè®®åŸç†ã€‚CAS 1.0åè®®çš„å·¥ä½œæµç¨‹å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2019-12/cas_web_flow_diagram.png&quot; alt=&quot;cas_web_flow_diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå…ˆä»‹ç»å‡ ä¸ªCASç™»å½•æµç¨‹ä¸­æ¶‰åŠçš„ç›¸å…³ç¥¨æ®ï¼ˆTicketï¼‰çš„æ¦‚å¿µï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;TGT&lt;/code&gt; â€”â€” Ticket Granting Ticketï¼Œç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒCASæœåŠ¡å™¨ä¸ºç”¨æˆ·ç­¾å‘çš„ä¸€ä¸ªç™»å½•ç¥¨æ®ã€‚TGTå°±æ˜¯æœåŠ¡å™¨å­˜å‚¨çš„ç”¨æˆ·Sessionçš„IDã€‚å¦‚æœCASæœåŠ¡å™¨é€šè¿‡TGTå¯ä»¥æŸ¥è¯¢å‡ºç”¨æˆ·çš„Sessionä¿¡æ¯ï¼Œåˆ™è¯´æ˜è¯¥ç”¨æˆ·å·²ç»ç™»å½•è¿‡äº†ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;TGC&lt;/code&gt; â€”â€” Ticket Granting Cookieï¼ŒTGTæ˜¯å­˜å‚¨åœ¨CASæœåŠ¡å™¨ç«¯çš„Sessionçš„IDï¼ŒTGCåˆ™æ˜¯å­˜å‚¨åœ¨æµè§ˆå™¨ç«¯çš„Cookieçš„Keyã€‚ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œæ¯æ¬¡è®¿é—®CASæœåŠ¡å™¨æ—¶æµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨æºå¸¦Cookieä¸­çš„TGCï¼ˆ&lt;em&gt;Cookie: TGC=TGT-12345678&lt;/em&gt;ï¼‰ï¼Œè¿™æ ·CASæœåŠ¡å™¨å°±èƒ½æ‹¿åˆ°TGTä»è€Œè·å–åˆ°ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt; â€”â€” Service Ticketï¼Œç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒCASæœåŠ¡å™¨ä¸ºè¯¥ç”¨æˆ·ç­¾å‘çš„è®¿é—®æŸä¸€ä¸ªåº”ç”¨çš„ç¥¨æ®ã€‚ç”¨æˆ·è®¿é—®åº”ç”¨æ—¶ï¼Œä¼šåœ¨URLä¸Šæºå¸¦è¿™ä¸ªSTç¥¨æ®ï¼Œè¿™ä¸ªåº”ç”¨æ”¶åˆ°è¯·æ±‚åä¼šå»æ‰¾CASæœåŠ¡å™¨éªŒè¯STçš„æœ‰æ•ˆæ€§ï¼ŒSTæœ‰æ•ˆåˆ™CASæœåŠ¡å™¨ä¼šå‘è¯¥åº”ç”¨è¿”å›è¯¥ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ã€‚å¦‚æœSTéªŒè¯æœ‰æ•ˆï¼Œåˆ™è¯¥åº”ç”¨ç›¸ä¿¡è¯¥ç”¨æˆ·å·²ç»ç™»å½•ï¼Œå…è®¸å…¶è®¿é—®åº”ç”¨èµ„æºã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å››ç†è§£caså·¥ä½œæµç¨‹&quot;&gt;å››ã€ç†è§£CASå·¥ä½œæµç¨‹&lt;/h3&gt;

&lt;p&gt;æˆ‘å°†ä¸Šé¢çš„CASå·¥ä½œæµç¨‹ç¿»è¯‘äº†ä¸€éï¼Œåšæˆæ¯”è¾ƒç›´è§‚çš„æµç¨‹å›¾ä»¥æ–¹ä¾¿ç†è§£ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2019-12/cas_work_flow.png&quot; alt=&quot;cas_work_flow.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æµç¨‹å›¾æœ‰äº†ï¼Œç°åœ¨æˆ‘ä»¬æ ¹æ®æµç¨‹å›¾ä¸€æ­¥æ­¥èµ°ä¸€éï¼ŒåŠ æ·±ç†è§£ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç°åœ¨ï¼Œç”¨æˆ·é¦–æ¬¡è®¿é—®åº”ç”¨Aï¼š&lt;em&gt;http://web.a.com&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;æ­¥éª¤1ï¼š&lt;/strong&gt;ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è®¿é—®åº”ç”¨Aï¼š&lt;em&gt;http://web.a.com&lt;/em&gt; ã€‚åº”ç”¨Aæ”¶åˆ°è¯·æ±‚ï¼Œå…ˆæ£€æŸ¥Cookieï¼ˆè¿™é‡Œçš„Cookieæ˜¯åº”ç”¨Açš„å±€éƒ¨Cookieï¼Œè€ŒéCASæœåŠ¡å™¨çš„å…¨å±€TGCï¼‰ä¸­æœ‰æ²¡æœ‰æºå¸¦è¯¥ç”¨æˆ·çš„ä¼šè¯IDï¼ˆå±€éƒ¨ä¼šè¯JSSESIONï¼‰ã€‚å¦‚æœæ²¡æœ‰åˆ™è¯´æ˜ç”¨æˆ·æœªç™»å½•ï¼Œåº”ç”¨Aä¼š302é‡å®šå‘åˆ°CASæœåŠ¡å™¨å¹¶åœ¨é‡å®šå‘çš„URLä¸Šæºå¸¦è‡ªå·±çš„åº”ç”¨é“¾æ¥ï¼š&lt;em&gt;http://cas.local.com/login?service=http%3a%2f%2fweb.a.com&lt;/em&gt; ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­¥éª¤2ï¼š&lt;/strong&gt;CASæœåŠ¡å™¨æ”¶åˆ°åº”ç”¨Açš„302è·³è½¬è¯·æ±‚ï¼Œå…ˆæ£€æŸ¥Cookieä¸­æ˜¯å¦åŒ…å«TGCã€‚å¦‚æœæ²¡æœ‰TGCåˆ™è¯´æ˜ç”¨æˆ·æœªç™»å½•è¿‡ï¼ŒCASæœåŠ¡å™¨ä¼šå‘æµè§ˆå™¨è¿”å›ç™»å½•è¡¨å•é¡µé¢ï¼Œè®©ç”¨æˆ·å¡«å†™è´¦å·å¯†ç ä¿¡æ¯è¿›è¡Œç™»å½•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­¥éª¤3ï¼š&lt;/strong&gt;ç”¨æˆ·å¡«å†™ç™»å½•è´¦å·å¯†ç ï¼Œç‚¹å‡»ç™»å½•ã€‚CASæœåŠ¡å™¨ä¼šéªŒè¯ç”¨æˆ·çš„è´¦å·å¯†ç æ­£ç¡®æ€§ï¼Œå¦‚æœæ­£ç¡®ï¼Œæ‰§è¡Œå¦‚ä¸‹åŠ¨ä½œï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç”Ÿæˆç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨æœåŠ¡å™¨ç¼“å­˜ï¼ˆä¾‹å¦‚&lt;code class=&quot;highlighter-rouge&quot;&gt;Redis&lt;/code&gt;ï¼‰ä¸­ï¼ŒTGTå°±æ˜¯ç¼“å­˜ä¼šè¯IDï¼ˆKeyï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;é€šè¿‡Responseå‘æµè§ˆå™¨çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;cas.local.com&lt;/code&gt;åŸŸå†™å…¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;Set-Cookie: CASTGC=TGT-12345678&lt;/code&gt; ï¼›&lt;/li&gt;
  &lt;li&gt;ä¸ºç”¨æˆ·ç­¾å‘ä¸€ä¸ªç”¨äºè®¿é—®åº”ç”¨Açš„&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt;ç¥¨æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ€åï¼ŒCASä¼š302è·³è½¬å›åº”ç”¨Aå¹¶å°†&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt;ä¼ é€’ç»™åº”ç”¨Aï¼š&lt;em&gt;http://web.a.com?ticket=ST-345678&lt;/em&gt; ã€‚&lt;/p&gt;

&lt;p&gt;åº”ç”¨Aæ‹¿åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt;ç¥¨æ®ä¹‹åï¼Œä¼šå‘CASæœåŠ¡å™¨è¯·æ±‚éªŒè¯&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt;çš„æœ‰æ•ˆæ€§ã€‚è‹¥&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt;æœ‰æ•ˆï¼Œåº”ç”¨Aä¼šåˆ›å»ºè¯¥ç”¨æˆ·çš„å±€éƒ¨ä¼šè¯ï¼Œå¹¶å°†ç”¨æˆ·çš„å±€éƒ¨ä¼šè¯Keyå†™å…¥æµè§ˆå™¨Cookieï¼ˆå†™å…¥è‡ªå·±çš„åŸŸå&lt;code class=&quot;highlighter-rouge&quot;&gt;web.a.com&lt;/code&gt;ï¼‰ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Set-Cookie: JSSESION=ABC1234567&lt;/code&gt; ã€‚è¿™æ ·åœ¨JSESSIONè¿‡æœŸä¹‹å‰ï¼Œç”¨æˆ·å†è®¿é—®åº”ç”¨Açš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å†è·³è½¬åˆ°CASæœåŠ¡å™¨ç¡®è®¤äº†ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ¥ä¸‹æ¥ï¼Œç”¨æˆ·é¦–æ¬¡è®¿é—®åº”ç”¨Bï¼š&lt;em&gt;http://web.b.com&lt;/em&gt; ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;æ­¥éª¤1ï¼š&lt;/strong&gt;åº”ç”¨BåŒæ ·ä¹Ÿä¼šå…ˆæ£€æŸ¥Cookieï¼ˆè¿™é‡Œçš„Cookieæ˜¯åº”ç”¨Bçš„å±€éƒ¨Cookieï¼Œè€ŒéCASæœåŠ¡å™¨çš„å…¨å±€TGCï¼‰ä¸­æœ‰æ²¡æœ‰æºå¸¦è¯¥ç”¨æˆ·çš„ä¼šè¯IDã€‚å› ä¸ºç”¨æˆ·è¿˜æ²¡åœ¨åº”ç”¨Båˆ›å»ºè¿‡å±€éƒ¨ä¼šè¯ï¼Œæ‰€ä»¥åº”ç”¨Bä¼šåŒæ ·è·³è½¬åˆ°CASæœåŠ¡å™¨ï¼š&lt;em&gt;http://cas.local.com/login?service=http%3a%2f%2fweb.b.com&lt;/em&gt; ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­¥éª¤2ï¼š&lt;/strong&gt;ç”±äºç”¨æˆ·åœ¨è®¿é—®åº”ç”¨Açš„æ—¶å€™ï¼ŒCASå·²ç»å‘æµè§ˆå™¨å†™å…¥äº†å…¨å±€Cookieï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;CASTGC=TGT-12345678&lt;/code&gt;ï¼Œæ‰€ä»¥åº”ç”¨Bé€šè¿‡&lt;em&gt;http://cas.local.com/login?service=http%3a%2f%2fweb.b.com&lt;/em&gt;è·³è½¬åˆ°CASæœåŠ¡å™¨æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç»™cas.local.comåŸŸåæºå¸¦ä¸Š&lt;code class=&quot;highlighter-rouge&quot;&gt;CASTGC=TGT-12345678&lt;/code&gt;è¿™ä¸ªCookieç»™CASæœåŠ¡å™¨ã€‚CASæœåŠ¡å™¨å‘ç°è¯·æ±‚ä¸­å¸¦æœ‰&lt;code class=&quot;highlighter-rouge&quot;&gt;CASTGC=TGT-12345678&lt;/code&gt;è¿™ä¸ªCookieï¼Œåˆ™ä¼šéªŒè¯&lt;code class=&quot;highlighter-rouge&quot;&gt;TGT-12345678&lt;/code&gt;æ˜¯å¦æœ‰æ•ˆï¼ˆå³æ˜¯å¦èƒ½æŸ¥åˆ°ç”¨æˆ·çš„Sessionï¼‰ï¼Œè‹¥CASæœåŠ¡å™¨éªŒè¯TGTæœ‰æ•ˆï¼Œåˆ™è®¤ä¸ºç”¨æˆ·ç™»å½•è¿‡äº†ï¼Œä¸ä¼šå†å‘ç”¨æˆ·è¿”å›ç™»å½•è¡¨å•é¡µé¢ï¼Œè€Œæ˜¯ç›´æ¥ä¸ºç”¨æˆ·ç”Ÿæˆä¸€ä¸ªç”¨äºè®¿é—®åº”ç”¨Bçš„STç¥¨æ®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ­¥éª¤3ï¼š&lt;/strong&gt;åº”ç”¨Bæ¥ä¸‹æ¥å°±è·Ÿåº”ç”¨Aæ‰€åšçš„äº‹æƒ…ä¸€æ ·äº†ï¼šéªŒè¯&lt;code class=&quot;highlighter-rouge&quot;&gt;ST&lt;/code&gt;çš„æœ‰æ•ˆæ€§ï¼Œåˆ›å»ºè¯¥ç”¨æˆ·çš„å±€éƒ¨ä¼šè¯ï¼Œå¹¶å°†ç”¨æˆ·çš„å±€éƒ¨ä¼šè¯Keyå†™å…¥æµè§ˆå™¨Cookieï¼ˆå†™å…¥è‡ªå·±çš„åŸŸå&lt;code class=&quot;highlighter-rouge&quot;&gt;web.b.com&lt;/code&gt;ï¼‰ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Set-Cookie: JSSESION=XYZ1234567&lt;/code&gt; ã€‚åŒæ ·åœ¨JSESSIONè¿‡æœŸä¹‹å‰ï¼Œç”¨æˆ·å†è®¿é—®åº”ç”¨Bçš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å†è·³è½¬åˆ°CASæœåŠ¡å™¨è¿›è¡Œç¡®è®¤äº†ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æˆ‘ä»¬å‘ç°ï¼Œç”¨æˆ·åœ¨åº”ç”¨Aå®Œæˆç™»å½•ä¹‹åï¼Œå†ç»§ç»­è®¿é—®åº”ç”¨Bçš„æ—¶å€™å®Œå…¨å°±ä¸éœ€è¦å†æ¬¡ç™»å½•ã€‚è¿™æ˜¯å› ä¸ºCASæœåŠ¡å™¨çš„å…¨å±€TGCçš„å­˜åœ¨ï¼Œè®©ç”¨æˆ·è½»æ¾åœ°å®Œæˆäº†è·¨åŸŸï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;web.a.com&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;web.b.com&lt;/code&gt;ä¸¤ä¸ªåŸŸï¼‰çš„å•ç‚¹ç™»å½•ï¼Œä¸€å¤„ç™»å½•ï¼Œå¤„å¤„è®¿é—®ï¼&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;äº”stç¥¨æ®çš„å®‰å…¨æ€§&quot;&gt;äº”ã€STç¥¨æ®çš„å®‰å…¨æ€§&lt;/h3&gt;

&lt;p&gt;ç›®æ ‡åº”ç”¨åœ¨æ˜¯å¦åˆ›å»ºç”¨æˆ·å±€éƒ¨ä¼šè¯çš„åˆ¤å®šå…³é”®åœ¨äºSTç¥¨æ®çš„æœ‰æ•ˆæ€§ã€‚æ‰€ä»¥æ‰ä¼šå…ˆå»æ‰¾CASæœåŠ¡å™¨éªŒè¯è¿™ä¸ªSTæ˜¯ä¸æ˜¯æœåŠ¡å™¨é¢å‘çš„ã€æœ‰æ•ˆçš„ã€‚&lt;/p&gt;

&lt;p&gt;STç¥¨æ®æ˜¯ç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒCASæœåŠ¡å™¨é‡å®šå‘åˆ°ç›®æ ‡åº”ç”¨æ—¶æºå¸¦åœ¨URLä¸Šçš„å‚æ•°ã€‚è¿™æ ·å¾ˆå®¹æ˜“è¢«æ”»å‡»è€…æ‹¦æˆªåˆ°è¿™ä¸ªå‚æ•°ã€‚å¦‚æœæ”»å‡»è€…æŠ¢åœ¨ç”¨æˆ·ä¹‹å‰å…ˆå‘CASæœåŠ¡å™¨éªŒè¯äº†è¿™ä¸ªç¥¨æ®ï¼Œé‚£ä¹ˆç”¨æˆ·å°†ä¼šéªŒè¯å¤±è´¥ï¼Œæ— æ³•ç™»å½•ç›®æ ‡åº”ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ—¶å€™å¯èƒ½CASéœ€è¦åšä¸€äº›å®‰å…¨çš„é˜²èŒƒï¼Œæ¯”å¦‚åœ¨ç”ŸæˆSTç¥¨æ®çš„æ—¶å€™ä½¿ç”¨å¤šç§å‚æ•°ç»„åˆï¼Œä¾‹å¦‚ï¼šéšæœºæ•° + IPç­‰æ¥åˆ¤æ–­å‰æ¥éªŒè¯STç¥¨æ®çš„ä¸»ä½“æ˜¯ä¸æ˜¯ç”¨æˆ·å°†è¦ç™»å½•çš„ç›®æ ‡åº”ç”¨ï¼Œè‹¥ä¸æ˜¯åˆ™æ‹’ç»éªŒè¯è¯·æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;STåœ¨éªŒè¯æˆåŠŸä¹‹åï¼ŒCASæœåŠ¡å™¨ä¼šå‘ç›®æ ‡åº”ç”¨è¿”å›ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç›®æ ‡åº”ç”¨æ ¹æ®è¿™äº›ç”¨æˆ·ä¿¡æ¯åˆ›å»ºç”¨æˆ·çš„å±€éƒ¨ä¼šè¯ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒCASæœåŠ¡å™¨åº”è¯¥åœ¨éªŒè¯å®Œæ¯•STä¹‹åï¼Œåˆ é™¤STåœ¨CASæœåŠ¡å™¨ä¸Šçš„ç¼“å­˜ï¼Œä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½ç”Ÿæˆæ–°çš„STç¥¨æ®ã€‚&lt;/p&gt;

</description>
        <pubDate>Sun, 15 Dec 2019 04:03:23 +0000</pubDate>
        <link>http://pandaq.xyz/2019/12/15/sso-cas/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2019/12/15/sso-cas/</guid>
        
        <category>SSO</category>
        
        <category>ç™»å½•æŠ€æœ¯</category>
        
        
      </item>
    
      <item>
        <title>Dubbo SPIæœºåˆ¶</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;å…³äºJava SPIæœºåˆ¶ï¼Œä¹‹å‰å†™è¿‡ä¸€ç¯‡ï¼š&lt;a href=&quot;/2019/10/java-spi&quot;&gt;Java SPIæœºåˆ¶&lt;/a&gt;ï¼Œåæ¥äº†è§£åˆ°Dubboä¹Ÿå®ç°äº†ä¸€å¥—SPIæœºåˆ¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨Javaçš„SPIã€‚å­¦ä¹ äº†&lt;a href=&quot;http://dubbo.apache.org/zh-cn/docs/source_code_guide/dubbo-spi.html&quot;&gt;Dubbo SPIæºç &lt;/a&gt;ä¹‹åï¼Œå†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¾ˆå¤šä¸œè¥¿ç›´æ¥å€Ÿé‰´åŸæ–‡ï¼Œä½†æ˜¯ç›®çš„ä¸ºäº†å·©å›ºæ‰€å­¦ï¼ŒåŠ æ·±ç†è§£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ä¸€dubbo-spiçš„ä½¿ç”¨&quot;&gt;ä¸€ã€Dubbo SPIçš„ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;ä¸Java SPIç›¸ä¼¼ï¼ŒDubboä¹Ÿæ˜¯é€šè¿‡ç‰¹å®šçš„ç›®å½•å»åŠ è½½SPIæ‰©å±•ç±»ï¼Œåªä¸è¿‡ä¸¤è€…åŠ è½½æ‰©å±•ç±»çš„ç›®å½•ä¸åŒï¼šJavaçš„SPIæœºåˆ¶ä»&lt;code class=&quot;highlighter-rouge&quot;&gt;META-INF/services&lt;/code&gt;ç›®å½•åŠ è½½ï¼ŒDubbo SPIä»&lt;code class=&quot;highlighter-rouge&quot;&gt;META-INF/dubbo&lt;/code&gt;ç›®å½•åŠ è½½ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨Dubbo SPIæ—¶ï¼Œå¯¹å¤–å‘å¸ƒçš„SPIæ¥å£å¿…é¡»éƒ½åŠ ä¸Š&lt;code class=&quot;highlighter-rouge&quot;&gt;@SPI&lt;/code&gt;çš„æ³¨è§£ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;com.pandaq.spi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.apache.dubbo.common.extension.SPI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@SPI&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PrinterServiceV2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å®ç°æ–¹æä¾›å¥½å®ç°ä¹‹åï¼Œåœ¨è‡ªå·±æºä»£ç çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;META-INF/dubbo&lt;/code&gt;ç›®å½•ä¸‹é¢æ–°å¢ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åå°±æ˜¯SPIæ¥å£çš„å…¨é™å®šåï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020-01/dubbo-spi.png&quot; alt=&quot;dubbo-spi.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹çœ‹æ€ä¹ˆåŠ è½½å¹¶ä½¿ç”¨æ‰©å±•ç±»ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PrinterLauncher&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Dubbo SPIæœºåˆ¶ä½¿ç”¨&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;PrinterServiceV2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extensionLoader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;PrinterServiceV2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;// åŠ è½½ epson-v1 æ‰©å±•ç±»&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;PrinterServiceV2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;printerServiceV2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;epson-v1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;printerServiceV2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æˆ‘è¦æ‰“å°å¾ˆå¤šé’±&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;c1&quot;&gt;// åŠ è½½ epson-v2 æ‰©å±•ç±»&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;printerServiceV2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;epson-v2&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;printerServiceV2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æˆ‘è¦æ‰“å°å¾ˆå¤šé’±&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è¿è¡Œç»“æœ&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;çˆ±æ™®ç”Ÿç¬¬ä¸€ä»£æ‰“å°æœºä¸ºæ‚¨æœåŠ¡&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼š&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;æˆ‘è¦æ‰“å°å¾ˆå¤šé’±&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;çˆ±æ™®ç”Ÿç¬¬äºŒä»£æ‰“å°æœºä»¥&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ã€Œ&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;å€&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ã€&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;é€Ÿåº¦ä¸ºæ‚¨æœåŠ¡&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ï¼š&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;æˆ‘è¦æ‰“å°å¾ˆå¤šé’±&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Dubbo SPIå°è£…åœ¨&lt;code class=&quot;highlighter-rouge&quot;&gt;org.apache.dubbo.common.extension.ExtensionLoader&lt;/code&gt;ä¸­ï¼Œä¸‹ä¸€èŠ‚é€šè¿‡æºç æ¥åˆ†æDubboçš„SPIã€‚&lt;/p&gt;

&lt;h3 id=&quot;äºŒdubbo-spiæºç &quot;&gt;äºŒã€Dubbo SPIæºç &lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;æºç åŸºäºApache Dubbo 2.7.5ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥ï¼šå…ˆçœ‹çœ‹&lt;code class=&quot;highlighter-rouge&quot;&gt;getExtensionLoader&lt;/code&gt;æ–¹æ³•ï¼šåŸºäºSPIæ¥å£Classç±»å‹è·å–ExtensionLoaderçš„å®ä¾‹&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Extension type == null&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Extension type (&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;) is not an interface!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;withExtensionAnnotation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// SPIæ¥å£å¿…é¡»åŠ ä¸ŠDubboæä¾›çš„@SPIæ³¨è§£&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Extension type (&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
                    &lt;span class=&quot;s&quot;&gt;&quot;) is not an extension, because it is NOT annotated with @&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SPI&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getSimpleName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;)&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;EXTENSION_LOADERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œç›´æ¥é’ˆå¯¹æŸä¸ªSPIæ¥å£çš„Classç±»å‹åšä¸€ä¸ªæœ¬åœ°ç¼“å­˜ï¼Œä¸‹æ¬¡å†æ¥å°±ä»ç¼“å­˜å–&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;EXTENSION_LOADERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putIfAbsent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;loader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;)&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;EXTENSION_LOADERS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬äºŒæ­¥ï¼šæ¥ä¸‹æ¥çœ‹çœ‹getExtensionæ–¹æ³•å¦‚ä½•åˆ›å»ºæ‰©å±•ç±»çš„å®ä¾‹&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// ç¬¬ä¸€èŠ‚ä½¿ç”¨çš„æ—¶å€™è¯´è¿‡ï¼ŒDubbo SPIé€šè¿‡é”®å€¼å¯¹æ¥å®šä¹‰æ‰©å±•ç±»çš„åŠ è½½ï¼Œè¿™é‡Œä¼ å…¥å…·ä½“çš„æ‰©å±•ç±»çš„keyæ¥è·å–æ‰©å±•ç±»å¯¹è±¡&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// è¿™ä¸ªé”®å€¼å¯¹çš„è®¾è®¡å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ï¼Œæ ¹æ®keyæ¥åŠ è½½å¹¶åˆå§‹åŒ–æŸä¸ªæ‰©å±•å¯¹è±¡ï¼Œä¸åƒJava SPIä¸€æ¬¡æ€§åŠ è½½å¹¶åˆå§‹åŒ–æ‰€æœ‰æ‰©å±•ç±»ã€‚&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StringUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Extension name == null&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getDefaultExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// é€šè¿‡æ ‡å‡†çš„åŒé‡æ£€éªŒå•ä¾‹æ¨¡å¼æ¥ä¿è¯keyå¯¹åº”æ‰©å±•ç±»å¯¹è±¡çš„å•ä¾‹&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œæ˜¯æŸ¥è¯¢æœ¬åœ°ç¼“å­˜ï¼Œç¼“å­˜å‘½ä¸­å°±ç›´æ¥è¿”å›æ‰©å±•ç±»å¯¹è±¡å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;holder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getOrCreateHolder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// é‡ç‚¹åœ¨createExtensionæ–¹æ³•ï¼šå¦‚æœç¼“å­˜æ²¡å‘½ä¸­ï¼Œåˆ™èµ°è¿™é‡ŒåŠ è½½å¹¶åˆ›å»ºkeyå¯¹åº”çš„æ‰©å±•ç±»å¯¹è±¡&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;createExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬ä¸‰æ­¥ï¼šç»§ç»­è·Ÿè¸ªcreateExtensionæ–¹æ³•ï¼šåŠ è½½å¹¶åˆ›å»ºkeyå¯¹åº”çš„æ‰©å±•ç±»å¯¹è±¡ï¼Œæœ€ç»ˆé€šè¿‡åå°„åˆ›å»ºæ‰©å±•ç±»çš„å®ä¾‹&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// getExtensionClassesæ–¹æ³•çš„ä½œç”¨æ˜¯æ‰«æç‰¹å®šçš„ç›®å½•æ¥åŠ è½½Dubbo SPIå®šä¹‰çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå³keyå’Œvalueï¼Œå¹¶æ”¾åˆ°æœ¬åœ°ç¼“å­˜ä¸­ã€‚&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// valueå°±æ˜¯å®ç°æ–¹æä¾›çš„å…·ä½“å®ç°ç±»çš„å…¨é™å®šåã€‚&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/* æ‰«æçš„ç›®å½•å¦‚ä¸‹åˆ—è¡¨ï¼š
         META-INF/services/
         META-INF/dubbo/
         META-INF/dubbo/internal/
         
       å¯ä»¥çœ‹å‡ºDubboå¯¹Java SPIç›®å½•åšäº†å…¼å®¹ã€‚
       
       getExtensionClasses()æ–¹æ³•é‡Œé¢è¿˜åŒ…å«äº†ç±»åŠ è½½çš„è¿‡ç¨‹ï¼ŒåŸºæœ¬ä¸Java SPIç±»ä¼¼ï¼Œè¿™é‡Œä¸èµ˜è¿°
     */&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;clazz&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getExtensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clazz&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// æ ¹æ®getExtensionClasses().get(name)è·å–åˆ°äº†keyå¯¹åº”çš„æ‰©å±•ç±»çš„Classå¯¹è±¡ï¼Œå…ˆæŸ¥è¯¢ç¼“å­˜&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;EXTENSION_INSTANCES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clazz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// ç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™é€šè¿‡åå°„åˆ›å»ºæ‰©å±•ç±»çš„ç¤ºä¾‹å¹¶æ·»åŠ åˆ°æœ¬åœ°ç¼“å­˜ï¼Œä¸‹æ¬¡å†æ¥å°±ç›´æ¥èµ°ç¼“å­˜&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;EXTENSION_INSTANCES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putIfAbsent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clazz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;clazz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;EXTENSION_INSTANCES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clazz&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// Dubbo SPIè¿˜æä¾›äº†IoCç‰¹æ€§æ¥æ³¨å…¥æ‰©å±•ç±»æ‰€ä¾èµ–çš„å…¶ä»–å¯¹è±¡ï¼Œä¸è¿‡Dubbo SPIåªæ”¯æŒsetteræ–¹æ³•æ³¨å…¥æ–¹å¼&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// åé¢ç« èŠ‚å°†å•ç‹¬å¯¹Dubbo SPIçš„IoCåšåˆ†æï¼Œè¿™é‡Œå…ˆç•¥è¿‡&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;injectExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wrapperClasses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cachedWrapperClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CollectionUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isNotEmpty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wrapperClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wrapperClass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wrapperClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;injectExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wrapperClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getConstructor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;initExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Throwable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Extension instance (name: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;, class: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;) couldn't be instantiated: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬å››æ­¥ï¼šgetExtensionClassesæ–¹æ³•çš„ä½œç”¨æ˜¯æ‰«æç‰¹å®šçš„ç›®å½•æ¥åŠ è½½Dubbo SPIå®šä¹‰çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå³keyå’Œvalueï¼Œå¹¶æ”¾åˆ°æœ¬åœ°ç¼“å­˜ä¸­ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cachedClasses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Holder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getExtensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å…ˆä»ç¼“å­˜ä¸­è·å–å½“å‰å·²åŠ è½½çš„æ‰©å±•ç±»çš„Classå¯¹è±¡&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cachedClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// ç¼“å­˜æœªå‘½ä¸­åˆ™ä½¿ç”¨åŒé‡æ£€éªŒå•ä¾‹æ¨¡å¼ï¼šåŠ é”&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cachedClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cachedClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// åŠ è½½æ‰€æœ‰çš„æ‰©å±•ç±»çš„Classå¯¹è±¡ï¼šåªæ˜¯åŠ è½½æ‰©å±•ç±»ï¼Œå¹¶æœªåˆ›å»ºå®ä¾‹&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loadExtensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// cachedClassesç¼“å­˜äº†æ‰€æœ‰çš„æ‰©å±•ç±»çš„Classå¯¹è±¡ï¼šè¿™äº›Classå¯¹è±¡å¯ä»¥ç”¨æ¥åˆ›å»ºå¯¹åº”çš„æ‰©å±•ç±»çš„å®ä¾‹&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;cachedClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç¬¬äº”æ­¥ï¼šloadExtensionClassesæ–¹æ³•åŠ è½½æ‰€æœ‰æ‰©å±•ç±»&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SERVICES_DIRECTORY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;META-INF/services/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_DIRECTORY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;META-INF/dubbo/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_INTERNAL_DIRECTORY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_DIRECTORY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;internal/&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loadExtensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;cacheDefaultExtensionName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;();&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// loadDirectoryæ–¹æ³•å°±æ˜¯å®é™…è¯»å–æŒ‡å®šç›®å½•ä¸‹çš„SPIæ¥å£å…¨é™å®šåä¸ºæ–‡ä»¶åçš„æ–‡ä»¶ï¼Œå¹¶è§£æ&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loadDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_INTERNAL_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loadDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_INTERNAL_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;org.apache&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;com.alibaba&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loadDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loadDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;DUBBO_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;org.apache&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;com.alibaba&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loadDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SERVICES_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loadDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SERVICES_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;org.apache&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;com.alibaba&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// loadExtensionClasses()ç»“æŸä¹‹åï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„æ‰©å±•ç±»çš„Classå¯¹è±¡&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ä¾‹å¦‚æœ‰ä¸¤ä¸ªæ‰©å±•ç±»ï¼š&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     epson-v1 = com.epson.printer.EpsonV1Printer&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     epson-v2 = com.epson.printer.EpsonV2Printer&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å°±ä¼šå¾—åˆ°ï¼šMap&amp;lt;&quot;epson-v1&quot;, Class&amp;lt;EpsonV1Printer&amp;gt;&amp;gt; å’Œ Map&amp;lt;&quot;epson-v2&quot;, Class&amp;lt;EpsonV2Printer&amp;gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// åé¢å¦‚æœæƒ³è¦åˆ›å»ºæŸä¸ªæ‰©å±•ç±»çš„å®ä¾‹ï¼Œç›´æ¥é€šè¿‡keyè·å–å¯¹åº”æ‰©å±•ç±»çš„Classå¯¹è±¡ï¼Œé€šè¿‡åå°„å°±å¯ä»¥åˆ›å»º&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è¿™å°±ä¸ç¬¬ä¸‰æ­¥ä¸­çš„createExtensionæ–¹æ³•ä¸­åå°„åˆ›å»ºå®ä¾‹å¯¹åº”èµ·æ¥äº†&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extensionClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;loadExtensionClasses()ç»“æŸä¹‹åï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„æ‰©å±•ç±»çš„Classå¯¹è±¡ï¼Œè€Œä¸”æ‰©å±•ç±»çš„Classå¯¹è±¡æ˜¯ä»¥key-valueæ–¹å¼ç¼“å­˜èµ·æ¥ï¼Œåé¢å¦‚æœæƒ³è¦åˆ›å»ºæŸä¸ªæ‰©å±•ç±»çš„å®ä¾‹ï¼Œç›´æ¥é€šè¿‡keyè·å–å¯¹åº”æ‰©å±•ç±»çš„Classå¯¹è±¡ï¼Œé€šè¿‡åå°„å°±å¯ä»¥åˆ›å»ºï¼Œå³å¯ä»¥åšåˆ°æŒ‰éœ€åŠ è½½æ‰©å±•ç±»ï¼Œè¿™ç‚¹æ¯”Java SPIè¦å¼ºå¤§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸‰dubbo-ioc&quot;&gt;ä¸‰ã€Dubbo IoC&lt;/h3&gt;

&lt;p&gt;Dubbo SPIé‡Œé¢ä½¿ç”¨åˆ°äº†Dubbo IoCæ³¨å…¥ä¾èµ–ï¼Œç›´æ¥æ¥çœ‹injectExtensionæ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;injectExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objectFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// éå†ç›®æ ‡ç±»çš„æ‰€æœ‰æ–¹æ³•&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Method&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMethods&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// æ£€æµ‹æ–¹æ³•æ˜¯å¦ä»¥ set å¼€å¤´ï¼Œä¸”æ–¹æ³•ä»…æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸”æ–¹æ³•è®¿é—®çº§åˆ«ä¸º public&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// æ³¨æ˜ï¼šDubbo IoCé€šè¿‡setteræ–¹æ³•æ³¨å…¥ä¾èµ–&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isSetter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å¦‚æœç›®æ ‡ç±»çš„æ–¹æ³•ä½¿ç”¨äº†@DisableInjectæ³¨è§£ï¼Œåˆ™è¯¥æ–¹æ³•ä¸æ³¨å…¥&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAnnotation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;DisableInject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// è·å–setteræ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåªæ³¨å…¥ç¬¬ä¸€ä¸ªå‚æ•°&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getParameterTypes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å¦‚æœè¯¥å‚æ•°æ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼ˆbyteã€shortã€intã€longã€floatã€doubleã€boolenã€charï¼‰ï¼šä¸æ³¨å…¥ä¾èµ–&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ReflectUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isPrimitives&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// è·å–éœ€è¦æ³¨å…¥çš„å­—æ®µå&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// ä¾‹å¦‚ç›®æ ‡ç±»ä¾èµ–äº† private FooObj fooObj;&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// åˆ™å¯¹åº”çš„setteræ–¹æ³•ä¸ºï¼šsetFooObj(FooObj fooObj)&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// getSetterProperty(method) æœ€ç»ˆè¿”å› &quot;fooObj&quot;&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;property&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getSetterProperty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// ä»åº”ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒè·å– FooObj çš„å®ä¾‹ï¼šfooObj&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;c1&quot;&gt;// é€šè¿‡åå°„è°ƒç”¨setteræ–¹æ³•ï¼Œå°† FooObj çš„å®ä¾‹ï¼šfooObj æ³¨å…¥ç›®æ ‡ç±»ï¼Œå®Œæˆä¾èµ–æ³¨å…¥&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;invoke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Failed to inject via method &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; of interface &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæ¥çœ‹çœ‹Dubbo IoCå¦‚ä½•ä»åº”ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒè·å– FooObj çš„å®ä¾‹ï¼šfooObj&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// ExtensionLoaderç±»çš„æˆå‘˜å˜é‡&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExtensionFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ExtensionLoaderç±»çš„ç§æœ‰æ„é€ å‡½æ•°&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ExtensionFactoryä¹Ÿæ˜¯ä¸€ä¸ªDubbo SPIæ¥å£ï¼Œä¹Ÿæ˜¯é€šè¿‡SPIæ–¹å¼åŠ è½½æ¥çš„&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;objectFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExtensionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getExtensionLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ExtensionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAdaptiveExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
&lt;span class=&quot;c1&quot;&gt;// è¿™ä¸ªå°±æ˜¯ä»åº”ç”¨ä¸Šä¸‹æ–‡ç¯å¢ƒè·å–åˆ°æ‰€ä¾èµ–çš„ç±»çš„å®ä¾‹&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;objectFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Dubbo ç›®å‰æä¾›äº†ä¸¤ç§ ExtensionFactoryï¼Œåˆ†åˆ«æ˜¯ SpiExtensionFactory å’Œ SpringExtensionFactoryã€‚å‰è€…ç”¨äºåˆ›å»ºè‡ªé€‚åº”çš„æ‹“å±•ï¼Œåè€…æ˜¯ç”¨äºä» Spring çš„ IOC å®¹å™¨ä¸­è·å–æ‰€éœ€çš„æ‹“å±•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;æœ¬æ–‡æ‰€ç”¨åˆ°çš„æµ‹è¯•ä»£ç å·²ä¸Šä¼ åˆ°GitHubï¼š&lt;a href=&quot;https://github.com/LUZHO211/java-spi-test&quot;&gt;java-spi-test&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;å‚è€ƒæ–‡ç« &lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;1. &lt;a href=&quot;http://dubbo.apache.org/zh-cn/docs/source_code_guide/dubbo-spi.html&quot;&gt;Dubbo SPI&lt;/a&gt;&lt;/em&gt; &lt;br /&gt;&lt;/p&gt;

</description>
        <pubDate>Sat, 14 Dec 2019 12:52:22 +0000</pubDate>
        <link>http://pandaq.xyz/2019/12/14/dubbo-spi/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2019/12/14/dubbo-spi/</guid>
        
        <category>Dubbo</category>
        
        
      </item>
    
      <item>
        <title>Dubbo telnetï¼šinvokeç¼ºå°‘fastjsonæƒ¹çš„ç¥¸</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;åœ¨ä½¿ç”¨ Dubbo çš„telnet invokeå‘½ä»¤æµ‹è¯• Dubbo æ¥å£æ—¶ï¼Œtelnetæ§åˆ¶å°è¿”å›äº†ä¸€ä¸ªé”™è¯¯ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Invalid json argument, cause: com/alibaba/fastjson/JSON&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»é”™è¯¯ä¿¡æ¯çœ‹ï¼Œå¥½åƒè·Ÿ fastjson æœ‰ç‚¹å…³ç³»ã€‚äºæ˜¯å°±çœ‹äº†ä¸€ä¸‹ Dubbo å¤„ç† invoke å‘½ä»¤çš„å¤„ç†å™¨Handlerä»£ç æ¥çœ‹çœ‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.apache.dubbo.rpc.protocol.dubbo.telnet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.apache.dubbo.remoting.telnet.TelnetHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InvokeTelnetHandler&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TelnetHandler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// å¿½ç•¥è¿™é‡Œçš„ä»£ç  ...&lt;/span&gt;
    
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@SuppressWarnings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;telnet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Channel&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ä»¥ä¸Šä»£ç å¿½ç•¥ ...&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;[&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;]&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Throwable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Invalid json argument, cause: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// ä»¥ä¸‹ä»£ç å¿½ç•¥ ...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// å¿½ç•¥ä¸‹é¢çš„å…¶ä»–æ–¹æ³• ...&lt;/span&gt;
    
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å‘ç°é‡Œé¢åœ¨è§£æinvokeå‘½ä»¤å‚æ•°çš„æ—¶å€™ï¼Œä½¿ç”¨äº† fastjson çš„ JSON.parseArray æ–¹æ³•ã€‚ç”±äºé¡¹ç›®ä¸­æ²¡æœ‰å¼•å…¥ fastjson çš„ä¾èµ–ï¼Œæ‰€ä»¥ Dubbo telnet åœ¨è§£æå‚æ•°çš„æ—¶å€™æŠ›å‡ºäº†å¼‚å¸¸ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºè¯å®è¿™ç‚¹ï¼Œå¯åŠ¨å•ç‚¹è°ƒè¯•ã€‚å¦‚ä¸‹å›¾ï¼Œä»è¯¦ç»†çš„å¼‚å¸¸ä¿¡æ¯æ¥çœ‹ï¼Œç¡®å®æ˜¯ç¼ºå°‘äº† fastjson çš„ä¾èµ–å¯¼è‡´çš„å¼‚å¸¸ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2019-12/telnet-invoke-fastjson-error.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ç»™é¡¹ç›®åŠ ä¸Š fastjson ä¾èµ–å°±æ²¡é—®é¢˜äº†ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ‰€ä»¥ä¸ºä»€ä¹ˆ Dubbo æœ¬èº«ç”¨åˆ°äº† fastjson çš„ä»£ç ï¼Œè€Œè‡ªå·±åˆä¸å¼•å…¥ fastjson è¿™ä¸ªä¾èµ–å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

</description>
        <pubDate>Sat, 14 Dec 2019 06:52:22 +0000</pubDate>
        <link>http://pandaq.xyz/2019/12/14/dubbo-telnet-invoke-fastjson-error/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2019/12/14/dubbo-telnet-invoke-fastjson-error/</guid>
        
        <category>Dubbo</category>
        
        
      </item>
    
      <item>
        <title>ä½¿ç”¨telnetå‘½ä»¤æ¥è¿›è¡ŒDubboæ¥å£æµ‹è¯•</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;ä» &lt;code class=&quot;highlighter-rouge&quot;&gt;2.0.5&lt;/code&gt; ç‰ˆæœ¬å¼€å§‹ï¼ŒDubbo å¼€å§‹æ”¯æŒé€šè¿‡ telnet å‘½ä»¤æ¥è¿›è¡ŒæœåŠ¡æ²»ç†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä½¿ç”¨ telnet å‘½ä»¤æ¥ç›´æ¥è¿æ¥åˆ° Dubbo çš„æœåŠ¡æä¾›è€…ï¼Œä»è€Œç›´æ¥åœ¨å‘½ä»¤è¡Œæ§åˆ¶å°ä½¿ç”¨ Dubbo æä¾›çš„æŒ‡ä»¤æ¥è¿›è¡ŒæœåŠ¡æ²»ç†ï¼Œä¾‹å¦‚è°ƒç”¨ Dubbo æ¥å£ã€æŸ¥çœ‹æœåŠ¡è€…çŠ¶æ€ä»¥åŠæœåŠ¡è€…æä¾›çš„æ¥å£ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;telnet localhost 20880
Trying ::1...
Connected to localhost.
Escape character is &lt;span class=&quot;s1&quot;&gt;'^]'&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;

dubbo&amp;gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;telnetè¿æ¥ä¸Š Dubbo æœåŠ¡æä¾›è€…ä¹‹åï¼Œå¯ä»¥é€šè¿‡ Dubbo å†…å»ºçš„telnetå‘½ä»¤æ¥è·Ÿ Dubbo æœåŠ¡æä¾›è€…äº¤äº’ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸€ls-å‘½ä»¤&quot;&gt;ä¸€ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;ls&lt;/code&gt; å‘½ä»¤&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls&lt;/code&gt; â€”â€” åˆ—å‡º Dubbo æœåŠ¡æä¾›è€…æä¾›çš„æ¥å£åˆ—è¡¨ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls -l&lt;/code&gt; â€”â€” åˆ—å‡º Dubbo æœåŠ¡æä¾›è€…æä¾›çš„æ¥å£è¯¦ç»†ä¿¡æ¯åˆ—è¡¨ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls xxxService&lt;/code&gt; â€”â€” åˆ—å‡ºæŸä¸ª Dubbo æ¥å£æä¾›çš„æ–¹æ³•åˆ—è¡¨ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls -l xxxService&lt;/code&gt; â€”â€” åˆ—å‡ºæŸä¸ª Dubbo æ¥å£æä¾›çš„æ–¹æ³•è¯¦æƒ…åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls&lt;/code&gt;æŸ¥çœ‹æä¾›äº†å“ªäº›æ¥å£&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;ls
com.luzho211.endurance.dubbo.ComputerService
com.luzho211.endurance.dubbo.CameraService
com.luzho211.endurance.dubbo.PrinterService
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls -l&lt;/code&gt; æŸ¥çœ‹æ¥å£è¯¦ç»†ä¿¡æ¯&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;ls &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
com.luzho211.endurance.dubbo.ComputerService -&amp;gt; dubbo://192.168.1.101:20880/com.luzho211.endurance.dubbo.ComputerService?anyhost&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&amp;amp;application&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dubbo-telnet-service&amp;amp;bind.ip&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;192.168.1.101&amp;amp;bind.port&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;20880&amp;amp;dubbo&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2.6.2&amp;amp;generic&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&amp;amp;interface&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;com.luzho211.endurance.dubbo.ComputerService&amp;amp;methods&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;getComputerType,restart&amp;amp;pid&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33024&amp;amp;side&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;provider&amp;amp;timestamp&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1576075027350
com.luzho211.endurance.dubbo.CameraService -&amp;gt; dubbo://192.168.1.101:20880/com.luzho211.endurance.dubbo.CameraService?anyhost&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&amp;amp;application&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dubbo-telnet-service&amp;amp;bind.ip&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;192.168.1.101&amp;amp;bind.port&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;20880&amp;amp;dubbo&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2.6.2&amp;amp;generic&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&amp;amp;interface&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;com.luzho211.endurance.dubbo.CameraService&amp;amp;methods&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;getCameraVendorName,getCameraColor&amp;amp;pid&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33024&amp;amp;side&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;provider&amp;amp;timestamp&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1576075022280
com.luzho211.endurance.dubbo.PrinterService -&amp;gt; dubbo://192.168.1.101:20880/com.luzho211.endurance.dubbo.PrinterService?anyhost&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&amp;amp;application&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dubbo-telnet-service&amp;amp;bind.ip&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;192.168.1.101&amp;amp;bind.port&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;20880&amp;amp;dubbo&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;2.6.2&amp;amp;generic&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&amp;amp;interface&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;com.luzho211.endurance.dubbo.PrinterService&amp;amp;methods&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;getPrinterVendorName,printText&amp;amp;pid&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;33024&amp;amp;side&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;provider&amp;amp;timestamp&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1576075006858
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls xxxService&lt;/code&gt; æŸ¥çœ‹æŸä¸ª Dubbo æ¥å£æä¾›çš„æ–¹æ³•&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;ls com.luzho211.endurance.dubbo.PrinterService
getPrinterVendorName
printText
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¹Ÿå¯ä»¥ç›´æ¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;ls PrinterService&lt;/code&gt;ï¼Œçœå»æ¥å£çš„å…¨é™å®šåã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ls -l xxxService&lt;/code&gt; æŸ¥çœ‹æä¾›çš„æ–¹æ³•çš„è¯¦æƒ…ï¼šæ–¹æ³•çš„å‚æ•°ã€è¿”å›å€¼ç±»å‹&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;ls &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; PrinterService
java.lang.String getPrinterVendorName&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
void printText&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;java.lang.String&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;äºŒps-å‘½ä»¤&quot;&gt;äºŒã€&lt;code class=&quot;highlighter-rouge&quot;&gt;ps&lt;/code&gt; å‘½ä»¤&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps&lt;/code&gt; â€”â€” æŸ¥çœ‹æœåŠ¡æä¾›è€…çš„ç«¯å£åˆ—è¡¨ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps -l&lt;/code&gt; â€”â€” æŸ¥çœ‹æœåŠ¡æä¾›è€…çš„åœ°å€åˆ—è¡¨ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps port&lt;/code&gt; â€”â€” æŸ¥çœ‹æœåŠ¡æä¾›è€…çš„ç«¯å£ä¸Šçš„è¿æ¥ä¿¡æ¯ï¼ˆè¿æ¥çš„å®¢æˆ·ç«¯ä¿¡æ¯ï¼‰ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ps -l port&lt;/code&gt; â€”â€” æŸ¥çœ‹æœåŠ¡æä¾›è€…çš„ç«¯å£ä¸Šçš„è¿æ¥è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;ps
20880

dubbo&amp;gt;ps &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
dubbo://192.168.1.101:20880

dubbo&amp;gt;ps 20880
/0:0:0:0:0:0:0:1:49358

dubbo&amp;gt;ps &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; 20880
/0:0:0:0:0:0:0:1:49358 -&amp;gt; /0:0:0:0:0:0:0:1:20880
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä¸‰cdpwd-å‘½ä»¤&quot;&gt;ä¸‰ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;cd&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;pwd&lt;/code&gt; å‘½ä»¤&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cd xxxService&lt;/code&gt; â€”â€” æ”¹å˜ç¼ºçœæœåŠ¡ã€‚è®¾ç½®ç¼ºçœæœåŠ¡å¯ä»¥ä¸ç”¨æ¯æ¬¡éƒ½è¾“å…¥å…¨é™å®šåæ¥ä½¿ç”¨æœåŠ¡ï¼Œæ–¹ä¾¿æ“ä½œï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cd /&lt;/code&gt; â€”â€” å–æ¶ˆç¼ºçœæœåŠ¡ï¼Œå³ä¸è®¾ç½®ç¼ºçœæœåŠ¡ï¼›&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;pwd&lt;/code&gt; â€”â€” ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;pwd&lt;/code&gt; å¯ä»¥æŸ¥çœ‹å½“å‰è®¾ç½®çš„ç¼ºçœæœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;cd com.luzho211.endurance.dubbo.PrinterService
Used the com.luzho211.endurance.dubbo.PrinterService as default.
You can cancel default service by &lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt;: &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /

dubbo&amp;gt;pwd
com.luzho211.endurance.dubbo.PrinterService

dubbo&amp;gt;cd /
Cancelled default service com.luzho211.endurance.dubbo.PrinterService.

dubbo&amp;gt;pwd
/
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å››invoke-å‘½ä»¤&quot;&gt;å››ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;invoke&lt;/code&gt; å‘½ä»¤&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;invokeå‘½ä»¤ç”¨æ¥è°ƒç”¨ Dubbo æ–¹æ³•è¿›è¡Œæ¥å£æµ‹è¯•ã€‚å¯ä»¥çœå»æ¥å£å…¨é™å®šåè€Œç›´æ¥è°ƒç”¨æ–¹æ³•åï¼Œä½†æ˜¯å¦‚æœä¸åŒçš„æ¥å£æœåŠ¡åŒ…å«äº†åŒä¸€ä¸ªæ–¹æ³•åï¼Œå°±éœ€è¦å…¨é™å®šåæˆ–è€… xxxService.method æ–¹å¼æ¥è°ƒç”¨ã€‚å½“ invoke æ—¶åŒ¹é…åˆ°äº†å¤šä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;select&lt;/code&gt; å‘½ä»¤æ¥é€‰æ‹©è¦æ‰ç”¨çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šselect 1&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;invoke printText&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Hello, World!&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
null
elapsed: 0 ms.
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;äº”count-å‘½ä»¤ç»Ÿè®¡æœåŠ¡è°ƒç”¨æƒ…å†µ&quot;&gt;äº”ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;count&lt;/code&gt; å‘½ä»¤ï¼šç»Ÿè®¡æœåŠ¡è°ƒç”¨æƒ…å†µ&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;count xxxService 5&lt;/code&gt; â€”â€” ç»Ÿè®¡æŸæ¥å£æœåŠ¡ä¸‹çš„æ‰€æœ‰æ–¹æ³•çš„è°ƒç”¨æƒ…å†µï¼šç»Ÿè®¡5æ¬¡&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;count xxxService xxxMethod 5&lt;/code&gt; â€”â€” ç»Ÿè®¡æŸæ¥å£æœåŠ¡ä¸‹çš„æŸä¸ªæ–¹æ³•çš„è°ƒç”¨æƒ…å†µï¼šç»Ÿè®¡5æ¬¡&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;count com.luzho211.endurance.dubbo.PrinterService getPrinterVendorName 3
+----------------------+-------+--------+--------+---------+-----+
| method               | total | failed | active | average | max |
+----------------------+-------+--------+--------+---------+-----+
| getPrinterVendorName | 0     | 0      | 0      | 0ms     | 0ms |
+----------------------+-------+--------+--------+---------+-----+

+----------------------+-------+--------+--------+---------+-----+
| method               | total | failed | active | average | max |
+----------------------+-------+--------+--------+---------+-----+
| getPrinterVendorName | 0     | 0      | 0      | 0ms     | 0ms |
+----------------------+-------+--------+--------+---------+-----+

+----------------------+-------+--------+--------+---------+-----+
| method               | total | failed | active | average | max |
+----------------------+-------+--------+--------+---------+-----+
| getPrinterVendorName | 0     | 0      | 0      | 0ms     | 0ms |
+----------------------+-------+--------+--------+---------+-----+
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å…­status-å‘½ä»¤æŸ¥çœ‹æœåŠ¡çš„æ±‡æ€»æƒ…å†µ&quot;&gt;å…­ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;status&lt;/code&gt; å‘½ä»¤ï¼šæŸ¥çœ‹æœåŠ¡çš„æ±‡æ€»æƒ…å†µ&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;status &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
+------------+--------+--------------------------------------------------------+
| resource   | status | message                                                |
+------------+--------+--------------------------------------------------------+
| threadpool | OK     | Pool status:OK, max:200, core:200, largest:24, active:1, task:24, service port: 20880 |
| load       | OK     | load:3.22021484375,cpu:4                               |
| memory     | OK     | max:1820M,total:163M,used:60M,free:103M                |
| registry   | OK     | 47.111.96.193:2281&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;connected&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                          |
| server     | OK     | /192.168.1.101:20880&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;clients:1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                        |
| spring     | OK     |                                                        |
| summary    | OK     |                                                        |
+------------+--------+--------------------------------------------------------+
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä»¥ä¸Šæ‰€æœ‰çŠ¶æ€å‡OK&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;dubbo&amp;gt;status &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt;
+------------+--------+--------------------------------------------------------+
| resource   | status | message                                                |
+------------+--------+--------------------------------------------------------+
| threadpool | OK     | Pool status:OK, max:200, core:200, largest:28, active:1, task:28, service port: 20880 |
| load       | WARN   | load:7.51611328125,cpu:4                               |
| memory     | OK     | max:1820M,total:163M,used:62M,free:101M                |
| registry   | OK     | 47.111.96.193:2281&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;connected&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                          |
| server     | OK     | /192.168.1.101:20880&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;clients:1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;                        |
| spring     | OK     |                                                        |
| summary    | WARN   | load                                                   |
+------------+--------+--------------------------------------------------------+
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä»¥ä¸Šæœ‰äº›çŠ¶æ€ä¸ºè­¦å‘ŠWARNï¼Œä¾‹å¦‚ä¸Šé¢çš„WARNæ˜¾ç¤ºçš„æ˜¯cpuè´Ÿè½½è­¦å‘Šï¼Œå¯èƒ½æ˜¯cpuè´Ÿè½½æœ‰ç‚¹é«˜çš„åŸå› ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;å‚è€ƒæ–‡ç« &lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;1. &lt;a href=&quot;http://dubbo.apache.org/zh-cn/docs/user/references/telnet.html&quot;&gt;Telnet å‘½ä»¤å‚è€ƒæ‰‹å†Œ&lt;/a&gt;&lt;/em&gt; &lt;br /&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 10 Dec 2019 15:29:00 +0000</pubDate>
        <link>http://pandaq.xyz/2019/12/10/telnet-command/</link>
        <guid isPermaLink="true">http://pandaq.xyz/2019/12/10/telnet-command/</guid>
        
        <category>Dubbo</category>
        
        
      </item>
    
  </channel>
</rss>
